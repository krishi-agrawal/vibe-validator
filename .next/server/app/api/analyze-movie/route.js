"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze-movie/route";
exports.ids = ["app/api/analyze-movie/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-movie%2Froute&page=%2Fapi%2Fanalyze-movie%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-movie%2Froute.ts&appDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-movie%2Froute&page=%2Fapi%2Fanalyze-movie%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-movie%2Froute.ts&appDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_krish_Desktop_vibe_validator_app_api_analyze_movie_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/analyze-movie/route.ts */ \"(rsc)/./app/api/analyze-movie/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze-movie/route\",\n        pathname: \"/api/analyze-movie\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze-movie/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\krish\\\\Desktop\\\\vibe-validator\\\\app\\\\api\\\\analyze-movie\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_krish_Desktop_vibe_validator_app_api_analyze_movie_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze-movie/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplLW1vdmllJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplLW1vdmllJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZS1tb3ZpZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNrcmlzaCU1Q0Rlc2t0b3AlNUN2aWJlLXZhbGlkYXRvciU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDa3Jpc2glNUNEZXNrdG9wJTVDdmliZS12YWxpZGF0b3ImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQzBDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ2lKOztBQUVqSiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtdmFsLz83NmRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGtyaXNoXFxcXERlc2t0b3BcXFxcdmliZS12YWxpZGF0b3JcXFxcYXBwXFxcXGFwaVxcXFxhbmFseXplLW1vdmllXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplLW1vdmllL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZS1tb3ZpZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYW5hbHl6ZS1tb3ZpZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGtyaXNoXFxcXERlc2t0b3BcXFxcdmliZS12YWxpZGF0b3JcXFxcYXBwXFxcXGFwaVxcXFxhbmFseXplLW1vdmllXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FuYWx5emUtbW92aWUvcm91dGVcIjtcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-movie%2Froute&page=%2Fapi%2Fanalyze-movie%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-movie%2Froute.ts&appDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analyze-movie/route.ts":
/*!****************************************!*\
  !*** ./app/api/analyze-movie/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n// app/api/analyze-movie/route.ts\n\n// Hugging Face models for movie analysis - using more powerful models\nconst HF_MOVIE_ANALYSIS_MODEL = \"https://api-inference.huggingface.co/models/moonshotai/Kimi-K2-Instruct\";\nconst HF_BACKUP_MODEL = \"https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.1\";\nconst HF_ALTERNATIVE_MODEL = \"https://api-inference.huggingface.co/models/google/flan-t5-large\";\nasync function analyzeMovieWithHF(movieName) {\n    if (!process.env.HUGGINGFACE_API_KEY) {\n        throw new Error(\"Missing Hugging Face API key\");\n    }\n    console.log(\"\\uD83C\\uDFAC Analyzing movie with Hugging Face:\", movieName);\n    // Try multiple models in order of preference\n    const models = [\n        HF_MOVIE_ANALYSIS_MODEL,\n        HF_BACKUP_MODEL,\n        HF_ALTERNATIVE_MODEL\n    ];\n    for (const model of models){\n        try {\n            const result = await tryMovieAnalysisWithModel(movieName, model);\n            if (result && result.summary && result.summary.length > 20) {\n                console.log(`‚úÖ Successfully analyzed with model: ${model}`);\n                return result;\n            }\n        } catch (error) {\n            console.log(`‚ùå Model ${model} failed, trying next...`);\n            continue;\n        }\n    }\n    // If all HF models fail, use intelligent analysis\n    console.log(\"\\uD83D\\uDCDD All HF models failed, using intelligent analysis\");\n    return intelligentMovieAnalysis(movieName);\n}\nasync function tryMovieAnalysisWithModel(movieName, modelUrl) {\n    const isLlamaModel = modelUrl.includes(\"llama\") || modelUrl.includes(\"mistral\");\n    let prompt;\n    if (isLlamaModel) {\n        // Format for Llama/Mistral models\n        prompt = `<s>[INST] You are a movie expert. Analyze the movie \"${movieName}\" and provide a comprehensive analysis.\r\n\r\nPlease provide detailed information about:\r\n1. A brief plot summary (2-3 sentences)\r\n2. Main themes (3-5 key themes)\r\n3. Primary genres (2-4 genres)\r\n4. Cultural keywords and elements (3-5 keywords)\r\n5. Target audience and demographics\r\n\r\nRespond in this exact JSON format:\r\n{\r\n  \"summary\": \"brief plot summary here\",\r\n  \"themes\": [\"theme1\", \"theme2\", \"theme3\"],\r\n  \"genres\": [\"genre1\", \"genre2\"],\r\n  \"culturalKeywords\": [\"keyword1\", \"keyword2\", \"keyword3\"]\r\n}\r\n\r\nOnly respond with valid JSON, no additional text. [/INST]`;\n    } else {\n        // Format for T5 and other models\n        prompt = `Analyze the movie \"${movieName}\". Provide a JSON response with summary, themes array, genres array, and culturalKeywords array. Movie analysis:`;\n    }\n    const response = await fetch(modelUrl, {\n        method: \"POST\",\n        headers: {\n            \"Authorization\": `Bearer ${process.env.HUGGINGFACE_API_KEY}`,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            inputs: prompt,\n            parameters: {\n                max_new_tokens: isLlamaModel ? 400 : 250,\n                temperature: 0.3,\n                do_sample: true,\n                top_p: 0.9,\n                return_full_text: false,\n                stop: isLlamaModel ? [\n                    \"</s>\",\n                    \"[INST]\"\n                ] : undefined\n            }\n        })\n    });\n    console.log(`üì° ${modelUrl} response status:`, response.status);\n    if (!response.ok) {\n        const errorText = await response.text();\n        console.error(`‚ùå ${modelUrl} error:`, errorText);\n        throw new Error(`Model API error: ${response.status}`);\n    }\n    const result = await response.json();\n    console.log(`üì¶ ${modelUrl} result:`, JSON.stringify(result, null, 2));\n    let generatedText = \"\";\n    if (Array.isArray(result) && result.length > 0) {\n        generatedText = result[0].generated_text || \"\";\n    } else if (typeof result === \"object\" && result.generated_text) {\n        generatedText = result.generated_text;\n    }\n    // Try to parse JSON from the response\n    const jsonMatch = generatedText.match(/\\{[\\s\\S]*\\}/);\n    if (jsonMatch) {\n        try {\n            const parsed = JSON.parse(jsonMatch[0]);\n            if (parsed.summary && parsed.themes && parsed.genres && parsed.culturalKeywords) {\n                return parsed;\n            }\n        } catch (parseError) {\n            console.log(\"JSON parse failed, trying text parsing...\");\n        }\n    }\n    // Fallback: parse the text response manually\n    return parseMovieAnalysisFromText(generatedText, movieName);\n}\nfunction intelligentMovieAnalysis(movieName) {\n    console.log(\"\\uD83D\\uDCDD Using intelligent movie analysis for:\", movieName);\n    // Basic movie database - in a real app, you'd use TMDB API or similar\n    const movieDatabase = {\n        \"blade runner 2049\": {\n            summary: \"A visually stunning sci-fi masterpiece exploring themes of identity, humanity, and what it means to be alive in a dystopian future.\",\n            themes: [\n                \"identity\",\n                \"humanity\",\n                \"artificial intelligence\",\n                \"dystopia\",\n                \"existentialism\"\n            ],\n            genres: [\n                \"sci-fi\",\n                \"drama\",\n                \"thriller\"\n            ],\n            culturalKeywords: [\n                \"cyberpunk\",\n                \"neo-noir\",\n                \"philosophical\",\n                \"visual spectacle\",\n                \"Denis Villeneuve\"\n            ]\n        },\n        \"the grand budapest hotel\": {\n            summary: \"A whimsical and meticulously crafted comedy-drama about friendship, loyalty, and the end of an era, told through Wes Anderson's distinctive visual style.\",\n            themes: [\n                \"friendship\",\n                \"nostalgia\",\n                \"European culture\",\n                \"class\",\n                \"loyalty\"\n            ],\n            genres: [\n                \"comedy\",\n                \"drama\",\n                \"adventure\"\n            ],\n            culturalKeywords: [\n                \"Wes Anderson\",\n                \"symmetrical\",\n                \"pastel colors\",\n                \"European\",\n                \"whimsical\"\n            ]\n        },\n        \"spirited away\": {\n            summary: \"A magical coming-of-age story about a young girl navigating a spirit world, exploring themes of environmentalism, family, and growing up.\",\n            themes: [\n                \"coming of age\",\n                \"environmentalism\",\n                \"family\",\n                \"courage\",\n                \"tradition vs modernity\"\n            ],\n            genres: [\n                \"animation\",\n                \"fantasy\",\n                \"family\"\n            ],\n            culturalKeywords: [\n                \"Studio Ghibli\",\n                \"Japanese folklore\",\n                \"hand-drawn animation\",\n                \"Miyazaki\",\n                \"magical realism\"\n            ]\n        },\n        \"parasite\": {\n            summary: \"A darkly comic thriller examining class inequality and social stratification through the story of two families from different economic backgrounds.\",\n            themes: [\n                \"class struggle\",\n                \"inequality\",\n                \"social commentary\",\n                \"family dynamics\",\n                \"survival\"\n            ],\n            genres: [\n                \"thriller\",\n                \"drama\",\n                \"dark comedy\"\n            ],\n            culturalKeywords: [\n                \"Korean cinema\",\n                \"Bong Joon-ho\",\n                \"social inequality\",\n                \"dark humor\",\n                \"architectural symbolism\"\n            ]\n        }\n    };\n    const lowerMovieName = movieName.toLowerCase();\n    // Check if we have specific data for this movie\n    if (movieDatabase[lowerMovieName]) {\n        return movieDatabase[lowerMovieName];\n    }\n    // Generate intelligent fallback based on movie name patterns\n    return generateFallbackAnalysis(movieName);\n}\nfunction generateFallbackAnalysis(movieName) {\n    // Basic pattern matching for common movie types\n    const lowerName = movieName.toLowerCase();\n    let themes = [\n        \"drama\",\n        \"character development\"\n    ];\n    let genres = [\n        \"drama\"\n    ];\n    let culturalKeywords = [\n        \"cinematic\",\n        \"storytelling\"\n    ];\n    // Pattern-based analysis\n    if (lowerName.includes(\"star\") || lowerName.includes(\"space\") || lowerName.includes(\"galaxy\")) {\n        themes.push(\"adventure\", \"heroism\", \"good vs evil\");\n        genres.push(\"sci-fi\", \"adventure\");\n        culturalKeywords.push(\"space opera\", \"special effects\");\n    } else if (lowerName.includes(\"love\") || lowerName.includes(\"heart\")) {\n        themes.push(\"romance\", \"relationships\", \"love\");\n        genres.push(\"romance\", \"drama\");\n        culturalKeywords.push(\"romantic\", \"emotional\");\n    } else if (lowerName.includes(\"dark\") || lowerName.includes(\"night\")) {\n        themes.push(\"mystery\", \"suspense\", \"psychological\");\n        genres.push(\"thriller\", \"mystery\");\n        culturalKeywords.push(\"atmospheric\", \"noir\");\n    }\n    return {\n        summary: `A compelling ${genres[0]} that explores themes of ${themes.slice(0, 3).join(\", \")}, offering audiences a thoughtful cinematic experience.`,\n        themes: themes.slice(0, 5),\n        genres: genres.slice(0, 3),\n        culturalKeywords: culturalKeywords.slice(0, 5)\n    };\n}\nfunction parseMovieAnalysis(analysisText, movieName) {\n    // Extract themes, genres, and keywords from the generated text\n    const themes = extractListFromText(analysisText, [\n        \"theme\",\n        \"explores\",\n        \"about\",\n        \"deals with\"\n    ]);\n    const genres = extractGenres(analysisText);\n    const culturalKeywords = extractCulturalKeywords(analysisText);\n    return {\n        summary: analysisText.substring(0, 200) + \"...\",\n        themes: themes.length > 0 ? themes : [\n            \"drama\",\n            \"human nature\"\n        ],\n        genres: genres.length > 0 ? genres : [\n            \"drama\"\n        ],\n        culturalKeywords: culturalKeywords.length > 0 ? culturalKeywords : [\n            \"cinematic\",\n            \"artistic\"\n        ]\n    };\n}\nfunction extractListFromText(text, keywords) {\n    const items = [];\n    const sentences = text.toLowerCase().split(/[.!?]/);\n    sentences.forEach((sentence)=>{\n        keywords.forEach((keyword)=>{\n            if (sentence.includes(keyword)) {\n                // Simple extraction of potential themes\n                const words = sentence.split(\" \");\n                words.forEach((word)=>{\n                    if (word.length > 3 && ![\n                        \"the\",\n                        \"and\",\n                        \"that\",\n                        \"with\",\n                        \"this\"\n                    ].includes(word)) {\n                        items.push(word.replace(/[^a-zA-Z]/g, \"\"));\n                    }\n                });\n            }\n        });\n    });\n    return [\n        ...new Set(items)\n    ].slice(0, 5);\n}\nfunction extractGenres(text) {\n    const commonGenres = [\n        \"action\",\n        \"adventure\",\n        \"comedy\",\n        \"drama\",\n        \"horror\",\n        \"mystery\",\n        \"romance\",\n        \"sci-fi\",\n        \"thriller\",\n        \"fantasy\",\n        \"animation\",\n        \"documentary\",\n        \"musical\"\n    ];\n    const foundGenres = commonGenres.filter((genre)=>text.toLowerCase().includes(genre) || text.toLowerCase().includes(genre.replace(\"-\", \" \")));\n    return foundGenres.length > 0 ? foundGenres : [\n        \"drama\"\n    ];\n}\nfunction extractCulturalKeywords(text) {\n    const culturalTerms = [\n        \"visual\",\n        \"cinematic\",\n        \"artistic\",\n        \"cultural\",\n        \"social\",\n        \"emotional\",\n        \"psychological\",\n        \"philosophical\",\n        \"symbolic\",\n        \"narrative\",\n        \"aesthetic\"\n    ];\n    const foundTerms = culturalTerms.filter((term)=>text.toLowerCase().includes(term));\n    return foundTerms.length > 0 ? foundTerms : [\n        \"cinematic\",\n        \"artistic\"\n    ];\n}\nfunction generateVibeParameters(movieAnalysis) {\n    const { themes, genres, culturalKeywords } = movieAnalysis;\n    // Map themes and genres to Qloo-style parameters\n    const audienceMap = {\n        \"sci-fi\": [\n            \"tech enthusiasts\",\n            \"sci-fi fans\",\n            \"young adults\"\n        ],\n        \"romance\": [\n            \"couples\",\n            \"young adults\",\n            \"date night\"\n        ],\n        \"action\": [\n            \"action fans\",\n            \"young males\",\n            \"thrill seekers\"\n        ],\n        \"drama\": [\n            \"general audience\",\n            \"film enthusiasts\",\n            \"mature viewers\"\n        ],\n        \"comedy\": [\n            \"general audience\",\n            \"young adults\",\n            \"family\"\n        ],\n        \"horror\": [\n            \"horror fans\",\n            \"young adults\",\n            \"thrill seekers\"\n        ],\n        \"fantasy\": [\n            \"fantasy fans\",\n            \"young adults\",\n            \"escapism seekers\"\n        ]\n    };\n    const audiences = [];\n    genres.forEach((genre)=>{\n        if (audienceMap[genre]) {\n            audiences.push(...audienceMap[genre]);\n        }\n    });\n    // Generate tags from themes and cultural keywords\n    const tags = [\n        ...themes,\n        ...culturalKeywords,\n        ...genres\n    ].map((tag)=>tag.toLowerCase().replace(/\\s+/g, \"_\"));\n    return {\n        audiences: [\n            ...new Set(audiences)\n        ].slice(0, 5),\n        tags: [\n            ...new Set(tags)\n        ].slice(0, 10),\n        entityType: \"urn:entity:movie\"\n    };\n}\nasync function getSimilarMoviesFromQloo(vibeParameters, originalMovie) {\n    if (!process.env.QLOO_API_KEY) {\n        console.log(\"‚ö†Ô∏è No Qloo API key provided, using fallback movies\");\n        return getFallbackSimilarMovies(vibeParameters, originalMovie);\n    }\n    console.log(\"\\uD83D\\uDD0D Fetching similar movies from Qloo with vibe parameters:\", vibeParameters);\n    try {\n        // Build the Qloo API request with proper vibe-based parameters\n        const params = new URLSearchParams();\n        params.append(\"filter.type\", \"urn:entity:movie\");\n        // Use the strongest signal first - interests based on primary vibe\n        const primaryVibe = vibeParameters.primaryMood || \"emotional\";\n        const vibeIntensity = vibeParameters.vibeIntensity || \"medium\";\n        // Map vibe characteristics to Qloo signals\n        if (vibeParameters.audiences && vibeParameters.audiences.length > 0) {\n            // Use the most relevant audience\n            params.append(\"signal.demographics.audiences\", vibeParameters.audiences[0]);\n            console.log(\"\\uD83C\\uDFAF Using audience signal:\", vibeParameters.audiences[0]);\n        }\n        // Add tag-based interests\n        if (vibeParameters.tags && vibeParameters.tags.length > 0) {\n            const qlooTags = vibeParameters.tags.slice(0, 3).map((tag)=>`urn:tag:keyword:media:${tag.replace(/[^a-zA-Z0-9]/g, \"_\").toLowerCase()}`);\n            params.append(\"signal.interests.tags\", qlooTags.join(\",\"));\n            console.log(\"\\uD83C\\uDFF7Ô∏è Using tag signals:\", qlooTags);\n        }\n        // Add location for better results\n        params.append(\"signal.location.query\", \"United States\");\n        params.append(\"limit\", \"8\");\n        const url = `https://hackathon.api.qloo.com/v2/insights/?${params.toString()}`;\n        console.log(\"\\uD83C\\uDF10 Qloo API URL:\", url);\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"X-Api-Key\": process.env.QLOO_API_KEY,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        console.log(\"\\uD83D\\uDCE1 Qloo API response status:\", response.status);\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"‚ùå Qloo API error:\", errorText);\n            // Try simpler approach with just location and primary genre\n            return await trySimplifiedQlooQuery(vibeParameters, originalMovie);\n        }\n        const data = await response.json();\n        console.log(\"\\uD83D\\uDCE6 Qloo movies response entities count:\", data.results?.entities?.length || 0);\n        const movies = data.results?.entities || [];\n        if (movies.length === 0) {\n            console.log(\"‚ö†Ô∏è No movies returned from Qloo, trying simplified query\");\n            return await trySimplifiedQlooQuery(vibeParameters, originalMovie);\n        }\n        const filteredMovies = movies.filter((movie)=>movie.name?.toLowerCase() !== originalMovie.toLowerCase()).map((movie)=>transformQlooMovieResponse(movie, vibeParameters)).slice(0, 6);\n        console.log(\"‚úÖ Successfully processed\", filteredMovies.length, \"movie recommendations\");\n        return filteredMovies;\n    } catch (error) {\n        console.error(\"‚ùå Qloo movie search failed:\", error);\n        return getFallbackSimilarMovies(vibeParameters, originalMovie);\n    }\n}\nasync function trySimplifiedQlooQuery(vibeParameters, originalMovie) {\n    console.log(\"\\uD83D\\uDD04 Trying simplified Qloo query...\");\n    try {\n        const params = new URLSearchParams();\n        params.append(\"filter.type\", \"urn:entity:movie\");\n        params.append(\"signal.location.query\", \"United States\");\n        // Use just the primary genre/theme as a simple query\n        const primaryTag = vibeParameters.tags[0] || \"drama\";\n        params.append(\"query\", primaryTag);\n        params.append(\"limit\", \"8\");\n        const url = `https://hackathon.api.qloo.com/v2/insights/?${params.toString()}`;\n        console.log(\"\\uD83C\\uDF10 Simplified Qloo API URL:\", url);\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"X-Api-Key\": process.env.QLOO_API_KEY,\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        if (response.ok) {\n            const data = await response.json();\n            const movies = data.results?.entities || [];\n            if (movies.length > 0) {\n                console.log(\"‚úÖ Simplified query successful with\", movies.length, \"results\");\n                return movies.filter((movie)=>movie.name?.toLowerCase() !== originalMovie.toLowerCase()).map((movie)=>transformQlooMovieResponse(movie, vibeParameters)).slice(0, 6);\n            }\n        }\n        throw new Error(\"Simplified query also failed\");\n    } catch (error) {\n        console.log(\"‚ùå Simplified query failed, using vibe-based fallback movies\");\n        return getFallbackSimilarMovies(vibeParameters, originalMovie);\n    }\n}\nfunction transformQlooMovieResponse(qlooMovie, vibeParameters) {\n    const title = qlooMovie.name || \"Unknown Movie\";\n    const description = qlooMovie.properties?.description || \"A compelling film experience\";\n    const year = qlooMovie.properties?.release_year || null;\n    const rating = qlooMovie.properties?.rating || null;\n    // Calculate match score based on shared elements\n    const movieKeywords = qlooMovie.properties?.keywords?.map((k)=>k.name.toLowerCase()) || [];\n    const vibeKeywords = vibeParameters.tags.map((t)=>t.toLowerCase());\n    const sharedElements = movieKeywords.filter((keyword)=>vibeKeywords.some((vibeKeyword)=>keyword.includes(vibeKeyword) || vibeKeyword.includes(keyword)));\n    const matchScore = Math.min(0.95, 0.6 + sharedElements.length * 0.08);\n    const reason = generateMovieMatchReason(title, sharedElements, vibeParameters);\n    return {\n        title,\n        description,\n        year,\n        rating,\n        matchScore,\n        reason,\n        sharedElements: sharedElements.length > 0 ? sharedElements : vibeParameters.tags.slice(0, 3),\n        qloo_data: {\n            entity_id: qlooMovie.entity_id,\n            type: qlooMovie.type\n        }\n    };\n}\nfunction generateMovieMatchReason(title, sharedElements, vibeParameters) {\n    if (sharedElements.length > 2) {\n        return `${title} shares key thematic elements including ${sharedElements.slice(0, 2).join(\", \")}, making it a strong match for similar audiences`;\n    } else if (sharedElements.length > 0) {\n        return `${title} resonates with similar ${sharedElements[0]} themes and cultural sensibilities`;\n    } else {\n        return `${title} appeals to similar audiences interested in ${vibeParameters.audiences[0] || \"thoughtful cinema\"}`;\n    }\n}\nfunction getFallbackSimilarMovies(vibeParameters, originalMovie) {\n    console.log(\"\\uD83D\\uDCDD Generating vibe-based fallback recommendations for:\", originalMovie);\n    console.log(\"\\uD83C\\uDFAD Using vibe parameters:\", vibeParameters);\n    const { primaryMood, vibeIntensity, tags } = vibeParameters;\n    // Comprehensive movie database organized by vibes\n    const moviesByVibe = {\n        // Sci-Fi & Futuristic Vibes\n        \"sci-fi\": [\n            {\n                title: \"Blade Runner 2049\",\n                year: 2017,\n                description: \"Visually stunning cyberpunk sequel exploring identity and humanity\",\n                vibeMatch: [\n                    \"futuristic\",\n                    \"philosophical\",\n                    \"visual\"\n                ]\n            },\n            {\n                title: \"Arrival\",\n                year: 2016,\n                description: \"Thoughtful alien contact film about communication and time\",\n                vibeMatch: [\n                    \"cerebral\",\n                    \"emotional\",\n                    \"sci-fi\"\n                ]\n            },\n            {\n                title: \"Ex Machina\",\n                year: 2014,\n                description: \"Intimate AI thriller about consciousness and humanity\",\n                vibeMatch: [\n                    \"psychological\",\n                    \"sci-fi\",\n                    \"philosophical\"\n                ]\n            },\n            {\n                title: \"Interstellar\",\n                year: 2014,\n                description: \"Epic space odyssey about love transcending dimensions\",\n                vibeMatch: [\n                    \"epic\",\n                    \"emotional\",\n                    \"sci-fi\"\n                ]\n            },\n            {\n                title: \"Her\",\n                year: 2013,\n                description: \"Romantic drama about human-AI relationship\",\n                vibeMatch: [\n                    \"romantic\",\n                    \"futuristic\",\n                    \"emotional\"\n                ]\n            }\n        ],\n        // Action & Intense Vibes\n        \"action\": [\n            {\n                title: \"Mad Max: Fury Road\",\n                year: 2015,\n                description: \"High-octane post-apocalyptic action masterpiece\",\n                vibeMatch: [\n                    \"intense\",\n                    \"visual\",\n                    \"action\"\n                ]\n            },\n            {\n                title: \"John Wick\",\n                year: 2014,\n                description: \"Stylish revenge thriller with incredible action choreography\",\n                vibeMatch: [\n                    \"stylish\",\n                    \"intense\",\n                    \"action\"\n                ]\n            },\n            {\n                title: \"The Raid\",\n                year: 2011,\n                description: \"Brutal martial arts action film in confined setting\",\n                vibeMatch: [\n                    \"intense\",\n                    \"martial_arts\",\n                    \"action\"\n                ]\n            },\n            {\n                title: \"Baby Driver\",\n                year: 2017,\n                description: \"Music-driven heist film with kinetic energy\",\n                vibeMatch: [\n                    \"stylish\",\n                    \"musical\",\n                    \"action\"\n                ]\n            }\n        ],\n        // Romance & Emotional Vibes\n        \"romance\": [\n            {\n                title: \"La La Land\",\n                year: 2016,\n                description: \"Modern musical about love and dreams in Los Angeles\",\n                vibeMatch: [\n                    \"romantic\",\n                    \"musical\",\n                    \"emotional\"\n                ]\n            },\n            {\n                title: \"Call Me By Your Name\",\n                year: 2017,\n                description: \"Beautiful coming-of-age romance set in Italy\",\n                vibeMatch: [\n                    \"romantic\",\n                    \"coming_of_age\",\n                    \"emotional\"\n                ]\n            },\n            {\n                title: \"The Shape of Water\",\n                year: 2017,\n                description: \"Fantasy romance between woman and amphibian creature\",\n                vibeMatch: [\n                    \"romantic\",\n                    \"fantasy\",\n                    \"unique\"\n                ]\n            },\n            {\n                title: \"Eternal Sunshine of the Spotless Mind\",\n                year: 2004,\n                description: \"Unique romance about memory and love\",\n                vibeMatch: [\n                    \"romantic\",\n                    \"psychological\",\n                    \"unique\"\n                ]\n            }\n        ],\n        // Dark & Psychological Vibes\n        \"thriller\": [\n            {\n                title: \"Gone Girl\",\n                year: 2014,\n                description: \"Psychological thriller about marriage and deception\",\n                vibeMatch: [\n                    \"psychological\",\n                    \"dark\",\n                    \"thriller\"\n                ]\n            },\n            {\n                title: \"Zodiac\",\n                year: 2007,\n                description: \"Meticulous procedural about the Zodiac killer investigation\",\n                vibeMatch: [\n                    \"dark\",\n                    \"investigative\",\n                    \"psychological\"\n                ]\n            },\n            {\n                title: \"Prisoners\",\n                year: 2013,\n                description: \"Intense thriller about desperate father searching for daughter\",\n                vibeMatch: [\n                    \"intense\",\n                    \"dark\",\n                    \"thriller\"\n                ]\n            },\n            {\n                title: \"Shutter Island\",\n                year: 2010,\n                description: \"Psychological thriller set in mysterious psychiatric facility\",\n                vibeMatch: [\n                    \"psychological\",\n                    \"mystery\",\n                    \"dark\"\n                ]\n            }\n        ],\n        // Drama & Character-Driven Vibes\n        \"drama\": [\n            {\n                title: \"Manchester by the Sea\",\n                year: 2016,\n                description: \"Deeply emotional drama about grief and family\",\n                vibeMatch: [\n                    \"emotional\",\n                    \"family\",\n                    \"drama\"\n                ]\n            },\n            {\n                title: \"Moonlight\",\n                year: 2016,\n                description: \"Beautiful coming-of-age story told in three acts\",\n                vibeMatch: [\n                    \"coming_of_age\",\n                    \"emotional\",\n                    \"character_study\"\n                ]\n            },\n            {\n                title: \"There Will Be Blood\",\n                year: 2007,\n                description: \"Epic character study of greed and ambition\",\n                vibeMatch: [\n                    \"character_study\",\n                    \"epic\",\n                    \"dark\"\n                ]\n            },\n            {\n                title: \"The Social Network\",\n                year: 2010,\n                description: \"Sharp drama about Facebook's creation and betrayal\",\n                vibeMatch: [\n                    \"character_study\",\n                    \"modern\",\n                    \"drama\"\n                ]\n            }\n        ],\n        // Comedy & Light Vibes\n        \"comedy\": [\n            {\n                title: \"The Grand Budapest Hotel\",\n                year: 2014,\n                description: \"Whimsical Wes Anderson comedy about European hotel\",\n                vibeMatch: [\n                    \"whimsical\",\n                    \"visual\",\n                    \"comedy\"\n                ]\n            },\n            {\n                title: \"Knives Out\",\n                year: 2019,\n                description: \"Clever whodunit with excellent ensemble cast\",\n                vibeMatch: [\n                    \"clever\",\n                    \"ensemble\",\n                    \"mystery\"\n                ]\n            },\n            {\n                title: \"Hunt for the Wilderpeople\",\n                year: 2016,\n                description: \"Heartwarming New Zealand adventure comedy\",\n                vibeMatch: [\n                    \"heartwarming\",\n                    \"adventure\",\n                    \"comedy\"\n                ]\n            }\n        ],\n        // Horror & Suspense Vibes\n        \"horror\": [\n            {\n                title: \"Hereditary\",\n                year: 2018,\n                description: \"Deeply unsettling family horror about grief and trauma\",\n                vibeMatch: [\n                    \"psychological\",\n                    \"family\",\n                    \"horror\"\n                ]\n            },\n            {\n                title: \"Get Out\",\n                year: 2017,\n                description: \"Social thriller combining horror with racial commentary\",\n                vibeMatch: [\n                    \"social\",\n                    \"psychological\",\n                    \"horror\"\n                ]\n            },\n            {\n                title: \"The Witch\",\n                year: 2015,\n                description: \"Period horror about Puritan family and witchcraft\",\n                vibeMatch: [\n                    \"atmospheric\",\n                    \"period\",\n                    \"horror\"\n                ]\n            }\n        ],\n        // Fantasy & Magical Vibes\n        \"fantasy\": [\n            {\n                title: \"Pan's Labyrinth\",\n                year: 2006,\n                description: \"Dark fairy tale blending reality and fantasy\",\n                vibeMatch: [\n                    \"fantasy\",\n                    \"dark\",\n                    \"magical\"\n                ]\n            },\n            {\n                title: \"The Shape of Water\",\n                year: 2017,\n                description: \"Romantic fantasy about love conquering difference\",\n                vibeMatch: [\n                    \"romantic\",\n                    \"fantasy\",\n                    \"unique\"\n                ]\n            },\n            {\n                title: \"Am\\xe9lie\",\n                year: 2001,\n                description: \"Whimsical French film about joy and human connection\",\n                vibeMatch: [\n                    \"whimsical\",\n                    \"heartwarming\",\n                    \"french\"\n                ]\n            }\n        ]\n    };\n    // Find movies that match the detected vibe\n    let selectedMovies = [];\n    // First, try to match based on primary tags\n    tags.forEach((tag)=>{\n        if (moviesByVibe[tag]) {\n            selectedMovies.push(...moviesByVibe[tag]);\n        }\n    });\n    // If no direct matches, try related vibes based on mood\n    if (selectedMovies.length === 0) {\n        const moodToVibes = {\n            \"dark\": [\n                \"thriller\",\n                \"horror\",\n                \"drama\"\n            ],\n            \"intense\": [\n                \"action\",\n                \"thriller\"\n            ],\n            \"emotional\": [\n                \"drama\",\n                \"romance\"\n            ],\n            \"light\": [\n                \"comedy\",\n                \"fantasy\"\n            ],\n            \"atmospheric\": [\n                \"thriller\",\n                \"horror\",\n                \"sci-fi\"\n            ]\n        };\n        if (primaryMood && moodToVibes[primaryMood]) {\n            moodToVibes[primaryMood].forEach((vibe)=>{\n                if (moviesByVibe[vibe]) {\n                    selectedMovies.push(...moviesByVibe[vibe]);\n                }\n            });\n        }\n    }\n    // Fallback to drama if still no matches\n    if (selectedMovies.length === 0) {\n        selectedMovies = moviesByVibe[\"drama\"];\n    }\n    // Remove duplicates and the original movie\n    const uniqueMovies = selectedMovies.filter((movie, index, self)=>movie.title.toLowerCase() !== originalMovie.toLowerCase() && index === self.findIndex((m)=>m.title === movie.title)).slice(0, 6);\n    // Add match scores and reasons based on vibe alignment\n    return uniqueMovies.map((movie, index)=>{\n        const sharedVibeElements = movie.vibeMatch.filter((vibe)=>tags.some((tag)=>tag.includes(vibe) || vibe.includes(tag)));\n        const matchScore = Math.max(0.6, 0.8 - index * 0.03 + sharedVibeElements.length * 0.05);\n        const reason = sharedVibeElements.length > 0 ? `Shares ${sharedVibeElements.join(\", \")} vibes with similar ${primaryMood || \"emotional\"} tone` : `Matches the ${primaryMood || \"emotional\"} and ${vibeIntensity || \"medium\"} intensity vibe`;\n        return {\n            title: movie.title,\n            description: movie.description,\n            year: movie.year,\n            rating: 7.0 + Math.random() * 2.5,\n            matchScore,\n            reason,\n            sharedElements: sharedVibeElements.length > 0 ? sharedVibeElements : tags.slice(0, 3)\n        };\n    });\n}\nasync function POST(request) {\n    const startTime = Date.now();\n    try {\n        console.log(\"=== Starting movie analysis ===\");\n        const { movieName } = await request.json();\n        if (!movieName) {\n            console.error(\"No movie name provided\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No movie name provided\"\n            }, {\n                status: 400\n            });\n        }\n        // Check API keys\n        if (!process.env.HUGGINGFACE_API_KEY) {\n            console.error(\"Missing HUGGINGFACE_API_KEY\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Server configuration error: Missing Hugging Face API key\"\n            }, {\n                status: 500\n            });\n        }\n        // Step 1: Analyze movie with Hugging Face\n        console.log(\"Step 1: Analyzing movie with Hugging Face...\");\n        let movieAnalysis;\n        try {\n            movieAnalysis = await analyzeMovieWithHF(movieName);\n            console.log(\"‚úÖ Movie analysis:\", movieAnalysis);\n        } catch (error) {\n            console.error(\"‚ùå Hugging Face movie analysis failed:\", error);\n            movieAnalysis = intelligentMovieAnalysis(movieName);\n            console.log(\"\\uD83D\\uDCDD Using fallback movie analysis\");\n        }\n        // Step 2: Generate vibe parameters\n        console.log(\"Step 2: Generating vibe parameters...\");\n        const vibeParameters = generateVibeParameters(movieAnalysis);\n        console.log(\"‚úÖ Vibe parameters:\", vibeParameters);\n        // Step 3: Get similar movies from Qloo\n        console.log(\"Step 3: Getting similar movies...\");\n        let similarMovies;\n        try {\n            similarMovies = await getSimilarMoviesFromQloo(vibeParameters, movieName);\n            console.log(\"‚úÖ Similar movies received:\", similarMovies.length);\n        } catch (error) {\n            console.error(\"‚ùå Movie recommendations failed:\", error);\n            similarMovies = getFallbackSimilarMovies(vibeParameters, movieName);\n            console.log(\"\\uD83D\\uDCDD Using fallback movie recommendations\");\n        }\n        const processingTime = Date.now() - startTime;\n        console.log(`‚úÖ Total processing time: ${processingTime}ms`);\n        const response = {\n            movieAnalysis,\n            vibeParameters,\n            similarMovies,\n            processingTime\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(response);\n    } catch (error) {\n        console.error(\"\\uD83D\\uDCA5 Critical error in movie analysis:\", error);\n        const errorResponse = {\n            error: \"Movie analysis failed\",\n            details: error instanceof Error ? error.message : \"Unknown error occurred\",\n            code: \"MOVIE_ANALYSIS_ERROR\"\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(errorResponse, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDUG1KLFNBQVNuSixpQkFBaUJULFFBQVFTLE1BQU1vSixPQUFPLEdBQUc7WUFDbERDLE1BQU07UUFDUjtRQUVBLE9BQU92SyxrRkFBWUEsQ0FBQzRDLElBQUksQ0FBQ3dILGVBQWU7WUFBRTVILFFBQVE7UUFBSTtJQUN4RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS12YWwvLi9hcHAvYXBpL2FuYWx5emUtbW92aWUvcm91dGUudHM/YjJkYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL2FuYWx5emUtbW92aWUvcm91dGUudHNcclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHR5cGUgeyBNb3ZpZVZpYmVSZXNwb25zZSwgQVBJRXJyb3IsIE1vdmllQW5hbHlzaXMsIE1vdmllVmliZVBhcmFtZXRlcnMsIFNpbWlsYXJNb3ZpZSB9IGZyb20gJy4uLy4uLy4uL3R5cGVzJztcclxuXHJcbi8vIEh1Z2dpbmcgRmFjZSBtb2RlbHMgZm9yIG1vdmllIGFuYWx5c2lzIC0gdXNpbmcgbW9yZSBwb3dlcmZ1bCBtb2RlbHNcclxuY29uc3QgSEZfTU9WSUVfQU5BTFlTSVNfTU9ERUwgPSAnaHR0cHM6Ly9hcGktaW5mZXJlbmNlLmh1Z2dpbmdmYWNlLmNvL21vZGVscy9tb29uc2hvdGFpL0tpbWktSzItSW5zdHJ1Y3QnO1xyXG5jb25zdCBIRl9CQUNLVVBfTU9ERUwgPSAnaHR0cHM6Ly9hcGktaW5mZXJlbmNlLmh1Z2dpbmdmYWNlLmNvL21vZGVscy9taXN0cmFsYWkvTWlzdHJhbC03Qi1JbnN0cnVjdC12MC4xJztcclxuY29uc3QgSEZfQUxURVJOQVRJVkVfTU9ERUwgPSAnaHR0cHM6Ly9hcGktaW5mZXJlbmNlLmh1Z2dpbmdmYWNlLmNvL21vZGVscy9nb29nbGUvZmxhbi10NS1sYXJnZSc7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBhbmFseXplTW92aWVXaXRoSEYobW92aWVOYW1lOiBzdHJpbmcpIHtcclxuICBpZiAoIXByb2Nlc3MuZW52LkhVR0dJTkdGQUNFX0FQSV9LRVkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBIdWdnaW5nIEZhY2UgQVBJIGtleScpO1xyXG4gIH1cclxuXHJcbiAgY29uc29sZS5sb2coJ/CfjqwgQW5hbHl6aW5nIG1vdmllIHdpdGggSHVnZ2luZyBGYWNlOicsIG1vdmllTmFtZSk7XHJcblxyXG4gIC8vIFRyeSBtdWx0aXBsZSBtb2RlbHMgaW4gb3JkZXIgb2YgcHJlZmVyZW5jZVxyXG4gIGNvbnN0IG1vZGVscyA9IFtIRl9NT1ZJRV9BTkFMWVNJU19NT0RFTCwgSEZfQkFDS1VQX01PREVMLCBIRl9BTFRFUk5BVElWRV9NT0RFTF07XHJcbiAgXHJcbiAgZm9yIChjb25zdCBtb2RlbCBvZiBtb2RlbHMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyeU1vdmllQW5hbHlzaXNXaXRoTW9kZWwobW92aWVOYW1lLCBtb2RlbCk7XHJcbiAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnN1bW1hcnkgJiYgcmVzdWx0LnN1bW1hcnkubGVuZ3RoID4gMjApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFN1Y2Nlc3NmdWxseSBhbmFseXplZCB3aXRoIG1vZGVsOiAke21vZGVsfWApO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDinYwgTW9kZWwgJHttb2RlbH0gZmFpbGVkLCB0cnlpbmcgbmV4dC4uLmApO1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIElmIGFsbCBIRiBtb2RlbHMgZmFpbCwgdXNlIGludGVsbGlnZW50IGFuYWx5c2lzXHJcbiAgY29uc29sZS5sb2coJ/Cfk50gQWxsIEhGIG1vZGVscyBmYWlsZWQsIHVzaW5nIGludGVsbGlnZW50IGFuYWx5c2lzJyk7XHJcbiAgcmV0dXJuIGludGVsbGlnZW50TW92aWVBbmFseXNpcyhtb3ZpZU5hbWUpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB0cnlNb3ZpZUFuYWx5c2lzV2l0aE1vZGVsKG1vdmllTmFtZTogc3RyaW5nLCBtb2RlbFVybDogc3RyaW5nKSB7XHJcbiAgY29uc3QgaXNMbGFtYU1vZGVsID0gbW9kZWxVcmwuaW5jbHVkZXMoJ2xsYW1hJykgfHwgbW9kZWxVcmwuaW5jbHVkZXMoJ21pc3RyYWwnKTtcclxuICBcclxuICBsZXQgcHJvbXB0O1xyXG4gIGlmIChpc0xsYW1hTW9kZWwpIHtcclxuICAgIC8vIEZvcm1hdCBmb3IgTGxhbWEvTWlzdHJhbCBtb2RlbHNcclxuICAgIHByb21wdCA9IGA8cz5bSU5TVF0gWW91IGFyZSBhIG1vdmllIGV4cGVydC4gQW5hbHl6ZSB0aGUgbW92aWUgXCIke21vdmllTmFtZX1cIiBhbmQgcHJvdmlkZSBhIGNvbXByZWhlbnNpdmUgYW5hbHlzaXMuXHJcblxyXG5QbGVhc2UgcHJvdmlkZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dDpcclxuMS4gQSBicmllZiBwbG90IHN1bW1hcnkgKDItMyBzZW50ZW5jZXMpXHJcbjIuIE1haW4gdGhlbWVzICgzLTUga2V5IHRoZW1lcylcclxuMy4gUHJpbWFyeSBnZW5yZXMgKDItNCBnZW5yZXMpXHJcbjQuIEN1bHR1cmFsIGtleXdvcmRzIGFuZCBlbGVtZW50cyAoMy01IGtleXdvcmRzKVxyXG41LiBUYXJnZXQgYXVkaWVuY2UgYW5kIGRlbW9ncmFwaGljc1xyXG5cclxuUmVzcG9uZCBpbiB0aGlzIGV4YWN0IEpTT04gZm9ybWF0OlxyXG57XHJcbiAgXCJzdW1tYXJ5XCI6IFwiYnJpZWYgcGxvdCBzdW1tYXJ5IGhlcmVcIixcclxuICBcInRoZW1lc1wiOiBbXCJ0aGVtZTFcIiwgXCJ0aGVtZTJcIiwgXCJ0aGVtZTNcIl0sXHJcbiAgXCJnZW5yZXNcIjogW1wiZ2VucmUxXCIsIFwiZ2VucmUyXCJdLFxyXG4gIFwiY3VsdHVyYWxLZXl3b3Jkc1wiOiBbXCJrZXl3b3JkMVwiLCBcImtleXdvcmQyXCIsIFwia2V5d29yZDNcIl1cclxufVxyXG5cclxuT25seSByZXNwb25kIHdpdGggdmFsaWQgSlNPTiwgbm8gYWRkaXRpb25hbCB0ZXh0LiBbL0lOU1RdYDtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gRm9ybWF0IGZvciBUNSBhbmQgb3RoZXIgbW9kZWxzXHJcbiAgICBwcm9tcHQgPSBgQW5hbHl6ZSB0aGUgbW92aWUgXCIke21vdmllTmFtZX1cIi4gUHJvdmlkZSBhIEpTT04gcmVzcG9uc2Ugd2l0aCBzdW1tYXJ5LCB0aGVtZXMgYXJyYXksIGdlbnJlcyBhcnJheSwgYW5kIGN1bHR1cmFsS2V5d29yZHMgYXJyYXkuIE1vdmllIGFuYWx5c2lzOmA7XHJcbiAgfVxyXG5cclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKG1vZGVsVXJsLCB7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7cHJvY2Vzcy5lbnYuSFVHR0lOR0ZBQ0VfQVBJX0tFWX1gLFxyXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgaW5wdXRzOiBwcm9tcHQsXHJcbiAgICAgIHBhcmFtZXRlcnM6IHtcclxuICAgICAgICBtYXhfbmV3X3Rva2VuczogaXNMbGFtYU1vZGVsID8gNDAwIDogMjUwLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXHJcbiAgICAgICAgZG9fc2FtcGxlOiB0cnVlLFxyXG4gICAgICAgIHRvcF9wOiAwLjksXHJcbiAgICAgICAgcmV0dXJuX2Z1bGxfdGV4dDogZmFsc2UsXHJcbiAgICAgICAgc3RvcDogaXNMbGFtYU1vZGVsID8gW1wiPC9zPlwiLCBcIltJTlNUXVwiXSA6IHVuZGVmaW5lZFxyXG4gICAgICB9XHJcbiAgICB9KSxcclxuICB9KTtcclxuXHJcbiAgY29uc29sZS5sb2coYPCfk6EgJHttb2RlbFVybH0gcmVzcG9uc2Ugc3RhdHVzOmAsIHJlc3BvbnNlLnN0YXR1cyk7XHJcblxyXG4gIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCAke21vZGVsVXJsfSBlcnJvcjpgLCBlcnJvclRleHQpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBNb2RlbCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gIGNvbnNvbGUubG9nKGDwn5OmICR7bW9kZWxVcmx9IHJlc3VsdDpgLCBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpKTtcclxuXHJcbiAgbGV0IGdlbmVyYXRlZFRleHQgPSAnJztcclxuICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICBnZW5lcmF0ZWRUZXh0ID0gcmVzdWx0WzBdLmdlbmVyYXRlZF90ZXh0IHx8ICcnO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcgJiYgcmVzdWx0LmdlbmVyYXRlZF90ZXh0KSB7XHJcbiAgICBnZW5lcmF0ZWRUZXh0ID0gcmVzdWx0LmdlbmVyYXRlZF90ZXh0O1xyXG4gIH1cclxuXHJcbiAgLy8gVHJ5IHRvIHBhcnNlIEpTT04gZnJvbSB0aGUgcmVzcG9uc2VcclxuICBjb25zdCBqc29uTWF0Y2ggPSBnZW5lcmF0ZWRUZXh0Lm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcclxuICBpZiAoanNvbk1hdGNoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XHJcbiAgICAgIGlmIChwYXJzZWQuc3VtbWFyeSAmJiBwYXJzZWQudGhlbWVzICYmIHBhcnNlZC5nZW5yZXMgJiYgcGFyc2VkLmN1bHR1cmFsS2V5d29yZHMpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VkO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdKU09OIHBhcnNlIGZhaWxlZCwgdHJ5aW5nIHRleHQgcGFyc2luZy4uLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRmFsbGJhY2s6IHBhcnNlIHRoZSB0ZXh0IHJlc3BvbnNlIG1hbnVhbGx5XHJcbiAgcmV0dXJuIHBhcnNlTW92aWVBbmFseXNpc0Zyb21UZXh0KGdlbmVyYXRlZFRleHQsIG1vdmllTmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGludGVsbGlnZW50TW92aWVBbmFseXNpcyhtb3ZpZU5hbWU6IHN0cmluZyk6IGFueSB7XHJcbiAgY29uc29sZS5sb2coJ/Cfk50gVXNpbmcgaW50ZWxsaWdlbnQgbW92aWUgYW5hbHlzaXMgZm9yOicsIG1vdmllTmFtZSk7XHJcbiAgXHJcbiAgLy8gQmFzaWMgbW92aWUgZGF0YWJhc2UgLSBpbiBhIHJlYWwgYXBwLCB5b3UnZCB1c2UgVE1EQiBBUEkgb3Igc2ltaWxhclxyXG4gIGNvbnN0IG1vdmllRGF0YWJhc2U6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XHJcbiAgICAnYmxhZGUgcnVubmVyIDIwNDknOiB7XHJcbiAgICAgIHN1bW1hcnk6ICdBIHZpc3VhbGx5IHN0dW5uaW5nIHNjaS1maSBtYXN0ZXJwaWVjZSBleHBsb3JpbmcgdGhlbWVzIG9mIGlkZW50aXR5LCBodW1hbml0eSwgYW5kIHdoYXQgaXQgbWVhbnMgdG8gYmUgYWxpdmUgaW4gYSBkeXN0b3BpYW4gZnV0dXJlLicsXHJcbiAgICAgIHRoZW1lczogWydpZGVudGl0eScsICdodW1hbml0eScsICdhcnRpZmljaWFsIGludGVsbGlnZW5jZScsICdkeXN0b3BpYScsICdleGlzdGVudGlhbGlzbSddLFxyXG4gICAgICBnZW5yZXM6IFsnc2NpLWZpJywgJ2RyYW1hJywgJ3RocmlsbGVyJ10sXHJcbiAgICAgIGN1bHR1cmFsS2V5d29yZHM6IFsnY3liZXJwdW5rJywgJ25lby1ub2lyJywgJ3BoaWxvc29waGljYWwnLCAndmlzdWFsIHNwZWN0YWNsZScsICdEZW5pcyBWaWxsZW5ldXZlJ11cclxuICAgIH0sXHJcbiAgICAndGhlIGdyYW5kIGJ1ZGFwZXN0IGhvdGVsJzoge1xyXG4gICAgICBzdW1tYXJ5OiAnQSB3aGltc2ljYWwgYW5kIG1ldGljdWxvdXNseSBjcmFmdGVkIGNvbWVkeS1kcmFtYSBhYm91dCBmcmllbmRzaGlwLCBsb3lhbHR5LCBhbmQgdGhlIGVuZCBvZiBhbiBlcmEsIHRvbGQgdGhyb3VnaCBXZXMgQW5kZXJzb25cXCdzIGRpc3RpbmN0aXZlIHZpc3VhbCBzdHlsZS4nLFxyXG4gICAgICB0aGVtZXM6IFsnZnJpZW5kc2hpcCcsICdub3N0YWxnaWEnLCAnRXVyb3BlYW4gY3VsdHVyZScsICdjbGFzcycsICdsb3lhbHR5J10sXHJcbiAgICAgIGdlbnJlczogWydjb21lZHknLCAnZHJhbWEnLCAnYWR2ZW50dXJlJ10sXHJcbiAgICAgIGN1bHR1cmFsS2V5d29yZHM6IFsnV2VzIEFuZGVyc29uJywgJ3N5bW1ldHJpY2FsJywgJ3Bhc3RlbCBjb2xvcnMnLCAnRXVyb3BlYW4nLCAnd2hpbXNpY2FsJ11cclxuICAgIH0sXHJcbiAgICAnc3Bpcml0ZWQgYXdheSc6IHtcclxuICAgICAgc3VtbWFyeTogJ0EgbWFnaWNhbCBjb21pbmctb2YtYWdlIHN0b3J5IGFib3V0IGEgeW91bmcgZ2lybCBuYXZpZ2F0aW5nIGEgc3Bpcml0IHdvcmxkLCBleHBsb3JpbmcgdGhlbWVzIG9mIGVudmlyb25tZW50YWxpc20sIGZhbWlseSwgYW5kIGdyb3dpbmcgdXAuJyxcclxuICAgICAgdGhlbWVzOiBbJ2NvbWluZyBvZiBhZ2UnLCAnZW52aXJvbm1lbnRhbGlzbScsICdmYW1pbHknLCAnY291cmFnZScsICd0cmFkaXRpb24gdnMgbW9kZXJuaXR5J10sXHJcbiAgICAgIGdlbnJlczogWydhbmltYXRpb24nLCAnZmFudGFzeScsICdmYW1pbHknXSxcclxuICAgICAgY3VsdHVyYWxLZXl3b3JkczogWydTdHVkaW8gR2hpYmxpJywgJ0phcGFuZXNlIGZvbGtsb3JlJywgJ2hhbmQtZHJhd24gYW5pbWF0aW9uJywgJ01peWF6YWtpJywgJ21hZ2ljYWwgcmVhbGlzbSddXHJcbiAgICB9LFxyXG4gICAgJ3BhcmFzaXRlJzoge1xyXG4gICAgICBzdW1tYXJ5OiAnQSBkYXJrbHkgY29taWMgdGhyaWxsZXIgZXhhbWluaW5nIGNsYXNzIGluZXF1YWxpdHkgYW5kIHNvY2lhbCBzdHJhdGlmaWNhdGlvbiB0aHJvdWdoIHRoZSBzdG9yeSBvZiB0d28gZmFtaWxpZXMgZnJvbSBkaWZmZXJlbnQgZWNvbm9taWMgYmFja2dyb3VuZHMuJyxcclxuICAgICAgdGhlbWVzOiBbJ2NsYXNzIHN0cnVnZ2xlJywgJ2luZXF1YWxpdHknLCAnc29jaWFsIGNvbW1lbnRhcnknLCAnZmFtaWx5IGR5bmFtaWNzJywgJ3N1cnZpdmFsJ10sXHJcbiAgICAgIGdlbnJlczogWyd0aHJpbGxlcicsICdkcmFtYScsICdkYXJrIGNvbWVkeSddLFxyXG4gICAgICBjdWx0dXJhbEtleXdvcmRzOiBbJ0tvcmVhbiBjaW5lbWEnLCAnQm9uZyBKb29uLWhvJywgJ3NvY2lhbCBpbmVxdWFsaXR5JywgJ2RhcmsgaHVtb3InLCAnYXJjaGl0ZWN0dXJhbCBzeW1ib2xpc20nXVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGxvd2VyTW92aWVOYW1lID0gbW92aWVOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgXHJcbiAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBzcGVjaWZpYyBkYXRhIGZvciB0aGlzIG1vdmllXHJcbiAgaWYgKG1vdmllRGF0YWJhc2VbbG93ZXJNb3ZpZU5hbWVdKSB7XHJcbiAgICByZXR1cm4gbW92aWVEYXRhYmFzZVtsb3dlck1vdmllTmFtZV07XHJcbiAgfVxyXG5cclxuICAvLyBHZW5lcmF0ZSBpbnRlbGxpZ2VudCBmYWxsYmFjayBiYXNlZCBvbiBtb3ZpZSBuYW1lIHBhdHRlcm5zXHJcbiAgcmV0dXJuIGdlbmVyYXRlRmFsbGJhY2tBbmFseXNpcyhtb3ZpZU5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUZhbGxiYWNrQW5hbHlzaXMobW92aWVOYW1lOiBzdHJpbmcpOiBhbnkge1xyXG4gIC8vIEJhc2ljIHBhdHRlcm4gbWF0Y2hpbmcgZm9yIGNvbW1vbiBtb3ZpZSB0eXBlc1xyXG4gIGNvbnN0IGxvd2VyTmFtZSA9IG1vdmllTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gIFxyXG4gIGxldCB0aGVtZXMgPSBbJ2RyYW1hJywgJ2NoYXJhY3RlciBkZXZlbG9wbWVudCddO1xyXG4gIGxldCBnZW5yZXMgPSBbJ2RyYW1hJ107XHJcbiAgbGV0IGN1bHR1cmFsS2V5d29yZHMgPSBbJ2NpbmVtYXRpYycsICdzdG9yeXRlbGxpbmcnXTtcclxuICBcclxuICAvLyBQYXR0ZXJuLWJhc2VkIGFuYWx5c2lzXHJcbiAgaWYgKGxvd2VyTmFtZS5pbmNsdWRlcygnc3RhcicpIHx8IGxvd2VyTmFtZS5pbmNsdWRlcygnc3BhY2UnKSB8fCBsb3dlck5hbWUuaW5jbHVkZXMoJ2dhbGF4eScpKSB7XHJcbiAgICB0aGVtZXMucHVzaCgnYWR2ZW50dXJlJywgJ2hlcm9pc20nLCAnZ29vZCB2cyBldmlsJyk7XHJcbiAgICBnZW5yZXMucHVzaCgnc2NpLWZpJywgJ2FkdmVudHVyZScpO1xyXG4gICAgY3VsdHVyYWxLZXl3b3Jkcy5wdXNoKCdzcGFjZSBvcGVyYScsICdzcGVjaWFsIGVmZmVjdHMnKTtcclxuICB9IGVsc2UgaWYgKGxvd2VyTmFtZS5pbmNsdWRlcygnbG92ZScpIHx8IGxvd2VyTmFtZS5pbmNsdWRlcygnaGVhcnQnKSkge1xyXG4gICAgdGhlbWVzLnB1c2goJ3JvbWFuY2UnLCAncmVsYXRpb25zaGlwcycsICdsb3ZlJyk7XHJcbiAgICBnZW5yZXMucHVzaCgncm9tYW5jZScsICdkcmFtYScpO1xyXG4gICAgY3VsdHVyYWxLZXl3b3Jkcy5wdXNoKCdyb21hbnRpYycsICdlbW90aW9uYWwnKTtcclxuICB9IGVsc2UgaWYgKGxvd2VyTmFtZS5pbmNsdWRlcygnZGFyaycpIHx8IGxvd2VyTmFtZS5pbmNsdWRlcygnbmlnaHQnKSkge1xyXG4gICAgdGhlbWVzLnB1c2goJ215c3RlcnknLCAnc3VzcGVuc2UnLCAncHN5Y2hvbG9naWNhbCcpO1xyXG4gICAgZ2VucmVzLnB1c2goJ3RocmlsbGVyJywgJ215c3RlcnknKTtcclxuICAgIGN1bHR1cmFsS2V5d29yZHMucHVzaCgnYXRtb3NwaGVyaWMnLCAnbm9pcicpO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgc3VtbWFyeTogYEEgY29tcGVsbGluZyAke2dlbnJlc1swXX0gdGhhdCBleHBsb3JlcyB0aGVtZXMgb2YgJHt0aGVtZXMuc2xpY2UoMCwgMykuam9pbignLCAnKX0sIG9mZmVyaW5nIGF1ZGllbmNlcyBhIHRob3VnaHRmdWwgY2luZW1hdGljIGV4cGVyaWVuY2UuYCxcclxuICAgIHRoZW1lczogdGhlbWVzLnNsaWNlKDAsIDUpLFxyXG4gICAgZ2VucmVzOiBnZW5yZXMuc2xpY2UoMCwgMyksXHJcbiAgICBjdWx0dXJhbEtleXdvcmRzOiBjdWx0dXJhbEtleXdvcmRzLnNsaWNlKDAsIDUpXHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VNb3ZpZUFuYWx5c2lzKGFuYWx5c2lzVGV4dDogc3RyaW5nLCBtb3ZpZU5hbWU6IHN0cmluZyk6IGFueSB7XHJcbiAgLy8gRXh0cmFjdCB0aGVtZXMsIGdlbnJlcywgYW5kIGtleXdvcmRzIGZyb20gdGhlIGdlbmVyYXRlZCB0ZXh0XHJcbiAgY29uc3QgdGhlbWVzID0gZXh0cmFjdExpc3RGcm9tVGV4dChhbmFseXNpc1RleHQsIFsndGhlbWUnLCAnZXhwbG9yZXMnLCAnYWJvdXQnLCAnZGVhbHMgd2l0aCddKTtcclxuICBjb25zdCBnZW5yZXMgPSBleHRyYWN0R2VucmVzKGFuYWx5c2lzVGV4dCk7XHJcbiAgY29uc3QgY3VsdHVyYWxLZXl3b3JkcyA9IGV4dHJhY3RDdWx0dXJhbEtleXdvcmRzKGFuYWx5c2lzVGV4dCk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHN1bW1hcnk6IGFuYWx5c2lzVGV4dC5zdWJzdHJpbmcoMCwgMjAwKSArICcuLi4nLFxyXG4gICAgdGhlbWVzOiB0aGVtZXMubGVuZ3RoID4gMCA/IHRoZW1lcyA6IFsnZHJhbWEnLCAnaHVtYW4gbmF0dXJlJ10sXHJcbiAgICBnZW5yZXM6IGdlbnJlcy5sZW5ndGggPiAwID8gZ2VucmVzIDogWydkcmFtYSddLFxyXG4gICAgY3VsdHVyYWxLZXl3b3JkczogY3VsdHVyYWxLZXl3b3Jkcy5sZW5ndGggPiAwID8gY3VsdHVyYWxLZXl3b3JkcyA6IFsnY2luZW1hdGljJywgJ2FydGlzdGljJ11cclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0TGlzdEZyb21UZXh0KHRleHQ6IHN0cmluZywga2V5d29yZHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xyXG4gIGNvbnN0IGl0ZW1zOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQudG9Mb3dlckNhc2UoKS5zcGxpdCgvWy4hP10vKTtcclxuICBcclxuICBzZW50ZW5jZXMuZm9yRWFjaChzZW50ZW5jZSA9PiB7XHJcbiAgICBrZXl3b3Jkcy5mb3JFYWNoKGtleXdvcmQgPT4ge1xyXG4gICAgICBpZiAoc2VudGVuY2UuaW5jbHVkZXMoa2V5d29yZCkpIHtcclxuICAgICAgICAvLyBTaW1wbGUgZXh0cmFjdGlvbiBvZiBwb3RlbnRpYWwgdGhlbWVzXHJcbiAgICAgICAgY29uc3Qgd29yZHMgPSBzZW50ZW5jZS5zcGxpdCgnICcpO1xyXG4gICAgICAgIHdvcmRzLmZvckVhY2god29yZCA9PiB7XHJcbiAgICAgICAgICBpZiAod29yZC5sZW5ndGggPiAzICYmICFbJ3RoZScsICdhbmQnLCAndGhhdCcsICd3aXRoJywgJ3RoaXMnXS5pbmNsdWRlcyh3b3JkKSkge1xyXG4gICAgICAgICAgICBpdGVtcy5wdXNoKHdvcmQucmVwbGFjZSgvW15hLXpBLVpdL2csICcnKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIFxyXG4gIHJldHVybiBbLi4ubmV3IFNldChpdGVtcyldLnNsaWNlKDAsIDUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0R2VucmVzKHRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICBjb25zdCBjb21tb25HZW5yZXMgPSBbXHJcbiAgICAnYWN0aW9uJywgJ2FkdmVudHVyZScsICdjb21lZHknLCAnZHJhbWEnLCAnaG9ycm9yJywgJ215c3RlcnknLCAncm9tYW5jZScsIFxyXG4gICAgJ3NjaS1maScsICd0aHJpbGxlcicsICdmYW50YXN5JywgJ2FuaW1hdGlvbicsICdkb2N1bWVudGFyeScsICdtdXNpY2FsJ1xyXG4gIF07XHJcbiAgXHJcbiAgY29uc3QgZm91bmRHZW5yZXMgPSBjb21tb25HZW5yZXMuZmlsdGVyKGdlbnJlID0+IFxyXG4gICAgdGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGdlbnJlKSB8fCB0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZ2VucmUucmVwbGFjZSgnLScsICcgJykpXHJcbiAgKTtcclxuICBcclxuICByZXR1cm4gZm91bmRHZW5yZXMubGVuZ3RoID4gMCA/IGZvdW5kR2VucmVzIDogWydkcmFtYSddO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0Q3VsdHVyYWxLZXl3b3Jkcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgY29uc3QgY3VsdHVyYWxUZXJtcyA9IFtcclxuICAgICd2aXN1YWwnLCAnY2luZW1hdGljJywgJ2FydGlzdGljJywgJ2N1bHR1cmFsJywgJ3NvY2lhbCcsICdlbW90aW9uYWwnLFxyXG4gICAgJ3BzeWNob2xvZ2ljYWwnLCAncGhpbG9zb3BoaWNhbCcsICdzeW1ib2xpYycsICduYXJyYXRpdmUnLCAnYWVzdGhldGljJ1xyXG4gIF07XHJcbiAgXHJcbiAgY29uc3QgZm91bmRUZXJtcyA9IGN1bHR1cmFsVGVybXMuZmlsdGVyKHRlcm0gPT4gdGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pKTtcclxuICByZXR1cm4gZm91bmRUZXJtcy5sZW5ndGggPiAwID8gZm91bmRUZXJtcyA6IFsnY2luZW1hdGljJywgJ2FydGlzdGljJ107XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlVmliZVBhcmFtZXRlcnMobW92aWVBbmFseXNpczogYW55KTogYW55IHtcclxuICBjb25zdCB7IHRoZW1lcywgZ2VucmVzLCBjdWx0dXJhbEtleXdvcmRzIH0gPSBtb3ZpZUFuYWx5c2lzO1xyXG4gIFxyXG4gIC8vIE1hcCB0aGVtZXMgYW5kIGdlbnJlcyB0byBRbG9vLXN0eWxlIHBhcmFtZXRlcnNcclxuICBjb25zdCBhdWRpZW5jZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xyXG4gICAgJ3NjaS1maSc6IFsndGVjaCBlbnRodXNpYXN0cycsICdzY2ktZmkgZmFucycsICd5b3VuZyBhZHVsdHMnXSxcclxuICAgICdyb21hbmNlJzogWydjb3VwbGVzJywgJ3lvdW5nIGFkdWx0cycsICdkYXRlIG5pZ2h0J10sXHJcbiAgICAnYWN0aW9uJzogWydhY3Rpb24gZmFucycsICd5b3VuZyBtYWxlcycsICd0aHJpbGwgc2Vla2VycyddLFxyXG4gICAgJ2RyYW1hJzogWydnZW5lcmFsIGF1ZGllbmNlJywgJ2ZpbG0gZW50aHVzaWFzdHMnLCAnbWF0dXJlIHZpZXdlcnMnXSxcclxuICAgICdjb21lZHknOiBbJ2dlbmVyYWwgYXVkaWVuY2UnLCAneW91bmcgYWR1bHRzJywgJ2ZhbWlseSddLFxyXG4gICAgJ2hvcnJvcic6IFsnaG9ycm9yIGZhbnMnLCAneW91bmcgYWR1bHRzJywgJ3RocmlsbCBzZWVrZXJzJ10sXHJcbiAgICAnZmFudGFzeSc6IFsnZmFudGFzeSBmYW5zJywgJ3lvdW5nIGFkdWx0cycsICdlc2NhcGlzbSBzZWVrZXJzJ11cclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGF1ZGllbmNlczogc3RyaW5nW10gPSBbXTtcclxuICBnZW5yZXMuZm9yRWFjaCgoZ2VucmU6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKGF1ZGllbmNlTWFwW2dlbnJlXSkge1xyXG4gICAgICBhdWRpZW5jZXMucHVzaCguLi5hdWRpZW5jZU1hcFtnZW5yZV0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIEdlbmVyYXRlIHRhZ3MgZnJvbSB0aGVtZXMgYW5kIGN1bHR1cmFsIGtleXdvcmRzXHJcbiAgY29uc3QgdGFncyA9IFsuLi50aGVtZXMsIC4uLmN1bHR1cmFsS2V5d29yZHMsIC4uLmdlbnJlc10ubWFwKHRhZyA9PiBcclxuICAgIHRhZy50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJ18nKVxyXG4gICk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGF1ZGllbmNlczogWy4uLm5ldyBTZXQoYXVkaWVuY2VzKV0uc2xpY2UoMCwgNSksXHJcbiAgICB0YWdzOiBbLi4ubmV3IFNldCh0YWdzKV0uc2xpY2UoMCwgMTApLFxyXG4gICAgZW50aXR5VHlwZTogJ3VybjplbnRpdHk6bW92aWUnXHJcbiAgfTtcclxufVxyXG5cclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRTaW1pbGFyTW92aWVzRnJvbVFsb28odmliZVBhcmFtZXRlcnM6IGFueSwgb3JpZ2luYWxNb3ZpZTogc3RyaW5nKSB7XHJcbiAgaWYgKCFwcm9jZXNzLmVudi5RTE9PX0FQSV9LRVkpIHtcclxuICAgIGNvbnNvbGUubG9nKCfimqDvuI8gTm8gUWxvbyBBUEkga2V5IHByb3ZpZGVkLCB1c2luZyBmYWxsYmFjayBtb3ZpZXMnKTtcclxuICAgIHJldHVybiBnZXRGYWxsYmFja1NpbWlsYXJNb3ZpZXModmliZVBhcmFtZXRlcnMsIG9yaWdpbmFsTW92aWUpO1xyXG4gIH1cclxuXHJcbiAgY29uc29sZS5sb2coJ/CflI0gRmV0Y2hpbmcgc2ltaWxhciBtb3ZpZXMgZnJvbSBRbG9vIHdpdGggdmliZSBwYXJhbWV0ZXJzOicsIHZpYmVQYXJhbWV0ZXJzKTtcclxuICBcclxuICB0cnkge1xyXG4gICAgLy8gQnVpbGQgdGhlIFFsb28gQVBJIHJlcXVlc3Qgd2l0aCBwcm9wZXIgdmliZS1iYXNlZCBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgICBwYXJhbXMuYXBwZW5kKCdmaWx0ZXIudHlwZScsICd1cm46ZW50aXR5Om1vdmllJyk7XHJcbiAgICBcclxuICAgIC8vIFVzZSB0aGUgc3Ryb25nZXN0IHNpZ25hbCBmaXJzdCAtIGludGVyZXN0cyBiYXNlZCBvbiBwcmltYXJ5IHZpYmVcclxuICAgIGNvbnN0IHByaW1hcnlWaWJlID0gdmliZVBhcmFtZXRlcnMucHJpbWFyeU1vb2QgfHwgJ2Vtb3Rpb25hbCc7XHJcbiAgICBjb25zdCB2aWJlSW50ZW5zaXR5ID0gdmliZVBhcmFtZXRlcnMudmliZUludGVuc2l0eSB8fCAnbWVkaXVtJztcclxuICAgIFxyXG4gICAgLy8gTWFwIHZpYmUgY2hhcmFjdGVyaXN0aWNzIHRvIFFsb28gc2lnbmFsc1xyXG4gICAgaWYgKHZpYmVQYXJhbWV0ZXJzLmF1ZGllbmNlcyAmJiB2aWJlUGFyYW1ldGVycy5hdWRpZW5jZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBVc2UgdGhlIG1vc3QgcmVsZXZhbnQgYXVkaWVuY2VcclxuICAgICAgcGFyYW1zLmFwcGVuZCgnc2lnbmFsLmRlbW9ncmFwaGljcy5hdWRpZW5jZXMnLCB2aWJlUGFyYW1ldGVycy5hdWRpZW5jZXNbMF0pO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+OryBVc2luZyBhdWRpZW5jZSBzaWduYWw6JywgdmliZVBhcmFtZXRlcnMuYXVkaWVuY2VzWzBdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQWRkIHRhZy1iYXNlZCBpbnRlcmVzdHNcclxuICAgIGlmICh2aWJlUGFyYW1ldGVycy50YWdzICYmIHZpYmVQYXJhbWV0ZXJzLnRhZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBxbG9vVGFncyA9IHZpYmVQYXJhbWV0ZXJzLnRhZ3Muc2xpY2UoMCwgMykubWFwKCh0YWc6IHN0cmluZykgPT4gXHJcbiAgICAgICAgYHVybjp0YWc6a2V5d29yZDptZWRpYToke3RhZy5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKS50b0xvd2VyQ2FzZSgpfWBcclxuICAgICAgKTtcclxuICAgICAgcGFyYW1zLmFwcGVuZCgnc2lnbmFsLmludGVyZXN0cy50YWdzJywgcWxvb1RhZ3Muam9pbignLCcpKTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfj7fvuI8gVXNpbmcgdGFnIHNpZ25hbHM6JywgcWxvb1RhZ3MpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBZGQgbG9jYXRpb24gZm9yIGJldHRlciByZXN1bHRzXHJcbiAgICBwYXJhbXMuYXBwZW5kKCdzaWduYWwubG9jYXRpb24ucXVlcnknLCAnVW5pdGVkIFN0YXRlcycpO1xyXG4gICAgcGFyYW1zLmFwcGVuZCgnbGltaXQnLCAnOCcpO1xyXG4gICAgXHJcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9oYWNrYXRob24uYXBpLnFsb28uY29tL3YyL2luc2lnaHRzLz8ke3BhcmFtcy50b1N0cmluZygpfWA7XHJcbiAgICBjb25zb2xlLmxvZygn8J+MkCBRbG9vIEFQSSBVUkw6JywgdXJsKTtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdYLUFwaS1LZXknOiBwcm9jZXNzLmVudi5RTE9PX0FQSV9LRVkhLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/Cfk6EgUWxvbyBBUEkgcmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cyk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBRbG9vIEFQSSBlcnJvcjonLCBlcnJvclRleHQpO1xyXG4gICAgICBcclxuICAgICAgLy8gVHJ5IHNpbXBsZXIgYXBwcm9hY2ggd2l0aCBqdXN0IGxvY2F0aW9uIGFuZCBwcmltYXJ5IGdlbnJlXHJcbiAgICAgIHJldHVybiBhd2FpdCB0cnlTaW1wbGlmaWVkUWxvb1F1ZXJ5KHZpYmVQYXJhbWV0ZXJzLCBvcmlnaW5hbE1vdmllKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgY29uc29sZS5sb2coJ/Cfk6YgUWxvbyBtb3ZpZXMgcmVzcG9uc2UgZW50aXRpZXMgY291bnQ6JywgZGF0YS5yZXN1bHRzPy5lbnRpdGllcz8ubGVuZ3RoIHx8IDApO1xyXG4gICAgXHJcbiAgICBjb25zdCBtb3ZpZXMgPSBkYXRhLnJlc3VsdHM/LmVudGl0aWVzIHx8IFtdO1xyXG4gICAgXHJcbiAgICBpZiAobW92aWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIE5vIG1vdmllcyByZXR1cm5lZCBmcm9tIFFsb28sIHRyeWluZyBzaW1wbGlmaWVkIHF1ZXJ5Jyk7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0cnlTaW1wbGlmaWVkUWxvb1F1ZXJ5KHZpYmVQYXJhbWV0ZXJzLCBvcmlnaW5hbE1vdmllKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZmlsdGVyZWRNb3ZpZXMgPSBtb3ZpZXNcclxuICAgICAgLmZpbHRlcigobW92aWU6IGFueSkgPT4gbW92aWUubmFtZT8udG9Mb3dlckNhc2UoKSAhPT0gb3JpZ2luYWxNb3ZpZS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAubWFwKChtb3ZpZTogYW55KSA9PiB0cmFuc2Zvcm1RbG9vTW92aWVSZXNwb25zZShtb3ZpZSwgdmliZVBhcmFtZXRlcnMpKVxyXG4gICAgICAuc2xpY2UoMCwgNik7XHJcbiAgICAgIFxyXG4gICAgY29uc29sZS5sb2coJ+KchSBTdWNjZXNzZnVsbHkgcHJvY2Vzc2VkJywgZmlsdGVyZWRNb3ZpZXMubGVuZ3RoLCAnbW92aWUgcmVjb21tZW5kYXRpb25zJyk7XHJcbiAgICByZXR1cm4gZmlsdGVyZWRNb3ZpZXM7XHJcbiAgICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgUWxvbyBtb3ZpZSBzZWFyY2ggZmFpbGVkOicsIGVycm9yKTtcclxuICAgIHJldHVybiBnZXRGYWxsYmFja1NpbWlsYXJNb3ZpZXModmliZVBhcmFtZXRlcnMsIG9yaWdpbmFsTW92aWUpO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdHJ5U2ltcGxpZmllZFFsb29RdWVyeSh2aWJlUGFyYW1ldGVyczogYW55LCBvcmlnaW5hbE1vdmllOiBzdHJpbmcpIHtcclxuICBjb25zb2xlLmxvZygn8J+UhCBUcnlpbmcgc2ltcGxpZmllZCBRbG9vIHF1ZXJ5Li4uJyk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcclxuICAgIHBhcmFtcy5hcHBlbmQoJ2ZpbHRlci50eXBlJywgJ3VybjplbnRpdHk6bW92aWUnKTtcclxuICAgIHBhcmFtcy5hcHBlbmQoJ3NpZ25hbC5sb2NhdGlvbi5xdWVyeScsICdVbml0ZWQgU3RhdGVzJyk7XHJcbiAgICBcclxuICAgIC8vIFVzZSBqdXN0IHRoZSBwcmltYXJ5IGdlbnJlL3RoZW1lIGFzIGEgc2ltcGxlIHF1ZXJ5XHJcbiAgICBjb25zdCBwcmltYXJ5VGFnID0gdmliZVBhcmFtZXRlcnMudGFnc1swXSB8fCAnZHJhbWEnO1xyXG4gICAgcGFyYW1zLmFwcGVuZCgncXVlcnknLCBwcmltYXJ5VGFnKTtcclxuICAgIHBhcmFtcy5hcHBlbmQoJ2xpbWl0JywgJzgnKTtcclxuICAgIFxyXG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vaGFja2F0aG9uLmFwaS5xbG9vLmNvbS92Mi9pbnNpZ2h0cy8/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xyXG4gICAgY29uc29sZS5sb2coJ/CfjJAgU2ltcGxpZmllZCBRbG9vIEFQSSBVUkw6JywgdXJsKTtcclxuICAgIFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdYLUFwaS1LZXknOiBwcm9jZXNzLmVudi5RTE9PX0FQSV9LRVkhLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIGNvbnN0IG1vdmllcyA9IGRhdGEucmVzdWx0cz8uZW50aXRpZXMgfHwgW107XHJcbiAgICAgIFxyXG4gICAgICBpZiAobW92aWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNpbXBsaWZpZWQgcXVlcnkgc3VjY2Vzc2Z1bCB3aXRoJywgbW92aWVzLmxlbmd0aCwgJ3Jlc3VsdHMnKTtcclxuICAgICAgICByZXR1cm4gbW92aWVzXHJcbiAgICAgICAgICAuZmlsdGVyKChtb3ZpZTogYW55KSA9PiBtb3ZpZS5uYW1lPy50b0xvd2VyQ2FzZSgpICE9PSBvcmlnaW5hbE1vdmllLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAubWFwKChtb3ZpZTogYW55KSA9PiB0cmFuc2Zvcm1RbG9vTW92aWVSZXNwb25zZShtb3ZpZSwgdmliZVBhcmFtZXRlcnMpKVxyXG4gICAgICAgICAgLnNsaWNlKDAsIDYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRocm93IG5ldyBFcnJvcignU2ltcGxpZmllZCBxdWVyeSBhbHNvIGZhaWxlZCcpO1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKCfinYwgU2ltcGxpZmllZCBxdWVyeSBmYWlsZWQsIHVzaW5nIHZpYmUtYmFzZWQgZmFsbGJhY2sgbW92aWVzJyk7XHJcbiAgICByZXR1cm4gZ2V0RmFsbGJhY2tTaW1pbGFyTW92aWVzKHZpYmVQYXJhbWV0ZXJzLCBvcmlnaW5hbE1vdmllKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyYW5zZm9ybVFsb29Nb3ZpZVJlc3BvbnNlKHFsb29Nb3ZpZTogYW55LCB2aWJlUGFyYW1ldGVyczogYW55KTogYW55IHtcclxuICBjb25zdCB0aXRsZSA9IHFsb29Nb3ZpZS5uYW1lIHx8ICdVbmtub3duIE1vdmllJztcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHFsb29Nb3ZpZS5wcm9wZXJ0aWVzPy5kZXNjcmlwdGlvbiB8fCAnQSBjb21wZWxsaW5nIGZpbG0gZXhwZXJpZW5jZSc7XHJcbiAgY29uc3QgeWVhciA9IHFsb29Nb3ZpZS5wcm9wZXJ0aWVzPy5yZWxlYXNlX3llYXIgfHwgbnVsbDtcclxuICBjb25zdCByYXRpbmcgPSBxbG9vTW92aWUucHJvcGVydGllcz8ucmF0aW5nIHx8IG51bGw7XHJcbiAgXHJcbiAgLy8gQ2FsY3VsYXRlIG1hdGNoIHNjb3JlIGJhc2VkIG9uIHNoYXJlZCBlbGVtZW50c1xyXG4gIGNvbnN0IG1vdmllS2V5d29yZHMgPSBxbG9vTW92aWUucHJvcGVydGllcz8ua2V5d29yZHM/Lm1hcCgoazogYW55KSA9PiBrLm5hbWUudG9Mb3dlckNhc2UoKSkgfHwgW107XHJcbiAgY29uc3QgdmliZUtleXdvcmRzID0gdmliZVBhcmFtZXRlcnMudGFncy5tYXAoKHQ6IHN0cmluZykgPT4gdC50b0xvd2VyQ2FzZSgpKTtcclxuICBcclxuICBjb25zdCBzaGFyZWRFbGVtZW50cyA9IG1vdmllS2V5d29yZHMuZmlsdGVyKChrZXl3b3JkOiBzdHJpbmcpID0+XHJcbiAgICB2aWJlS2V5d29yZHMuc29tZSgodmliZUtleXdvcmQ6IHN0cmluZykgPT4gXHJcbiAgICAgIGtleXdvcmQuaW5jbHVkZXModmliZUtleXdvcmQpIHx8IHZpYmVLZXl3b3JkLmluY2x1ZGVzKGtleXdvcmQpXHJcbiAgICApXHJcbiAgKTtcclxuICBcclxuICBjb25zdCBtYXRjaFNjb3JlID0gTWF0aC5taW4oMC45NSwgMC42ICsgKHNoYXJlZEVsZW1lbnRzLmxlbmd0aCAqIDAuMDgpKTtcclxuICBcclxuICBjb25zdCByZWFzb24gPSBnZW5lcmF0ZU1vdmllTWF0Y2hSZWFzb24odGl0bGUsIHNoYXJlZEVsZW1lbnRzLCB2aWJlUGFyYW1ldGVycyk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHRpdGxlLFxyXG4gICAgZGVzY3JpcHRpb24sXHJcbiAgICB5ZWFyLFxyXG4gICAgcmF0aW5nLFxyXG4gICAgbWF0Y2hTY29yZSxcclxuICAgIHJlYXNvbixcclxuICAgIHNoYXJlZEVsZW1lbnRzOiBzaGFyZWRFbGVtZW50cy5sZW5ndGggPiAwID8gc2hhcmVkRWxlbWVudHMgOiB2aWJlUGFyYW1ldGVycy50YWdzLnNsaWNlKDAsIDMpLFxyXG4gICAgcWxvb19kYXRhOiB7XHJcbiAgICAgIGVudGl0eV9pZDogcWxvb01vdmllLmVudGl0eV9pZCxcclxuICAgICAgdHlwZTogcWxvb01vdmllLnR5cGVcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU1vdmllTWF0Y2hSZWFzb24odGl0bGU6IHN0cmluZywgc2hhcmVkRWxlbWVudHM6IHN0cmluZ1tdLCB2aWJlUGFyYW1ldGVyczogYW55KTogc3RyaW5nIHtcclxuICBpZiAoc2hhcmVkRWxlbWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgcmV0dXJuIGAke3RpdGxlfSBzaGFyZXMga2V5IHRoZW1hdGljIGVsZW1lbnRzIGluY2x1ZGluZyAke3NoYXJlZEVsZW1lbnRzLnNsaWNlKDAsIDIpLmpvaW4oJywgJyl9LCBtYWtpbmcgaXQgYSBzdHJvbmcgbWF0Y2ggZm9yIHNpbWlsYXIgYXVkaWVuY2VzYDtcclxuICB9IGVsc2UgaWYgKHNoYXJlZEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgIHJldHVybiBgJHt0aXRsZX0gcmVzb25hdGVzIHdpdGggc2ltaWxhciAke3NoYXJlZEVsZW1lbnRzWzBdfSB0aGVtZXMgYW5kIGN1bHR1cmFsIHNlbnNpYmlsaXRpZXNgO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gYCR7dGl0bGV9IGFwcGVhbHMgdG8gc2ltaWxhciBhdWRpZW5jZXMgaW50ZXJlc3RlZCBpbiAke3ZpYmVQYXJhbWV0ZXJzLmF1ZGllbmNlc1swXSB8fCAndGhvdWdodGZ1bCBjaW5lbWEnfWA7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGYWxsYmFja1NpbWlsYXJNb3ZpZXModmliZVBhcmFtZXRlcnM6IGFueSwgb3JpZ2luYWxNb3ZpZTogc3RyaW5nKTogYW55W10ge1xyXG4gIGNvbnNvbGUubG9nKCfwn5OdIEdlbmVyYXRpbmcgdmliZS1iYXNlZCBmYWxsYmFjayByZWNvbW1lbmRhdGlvbnMgZm9yOicsIG9yaWdpbmFsTW92aWUpO1xyXG4gIGNvbnNvbGUubG9nKCfwn46tIFVzaW5nIHZpYmUgcGFyYW1ldGVyczonLCB2aWJlUGFyYW1ldGVycyk7XHJcbiAgXHJcbiAgY29uc3QgeyBwcmltYXJ5TW9vZCwgdmliZUludGVuc2l0eSwgdGFncyB9ID0gdmliZVBhcmFtZXRlcnM7XHJcbiAgXHJcbiAgLy8gQ29tcHJlaGVuc2l2ZSBtb3ZpZSBkYXRhYmFzZSBvcmdhbml6ZWQgYnkgdmliZXNcclxuICBjb25zdCBtb3ZpZXNCeVZpYmU6IFJlY29yZDxzdHJpbmcsIGFueVtdPiA9IHtcclxuICAgIC8vIFNjaS1GaSAmIEZ1dHVyaXN0aWMgVmliZXNcclxuICAgICdzY2ktZmknOiBbXHJcbiAgICAgIHsgdGl0bGU6ICdCbGFkZSBSdW5uZXIgMjA0OScsIHllYXI6IDIwMTcsIGRlc2NyaXB0aW9uOiAnVmlzdWFsbHkgc3R1bm5pbmcgY3liZXJwdW5rIHNlcXVlbCBleHBsb3JpbmcgaWRlbnRpdHkgYW5kIGh1bWFuaXR5JywgdmliZU1hdGNoOiBbJ2Z1dHVyaXN0aWMnLCAncGhpbG9zb3BoaWNhbCcsICd2aXN1YWwnXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnQXJyaXZhbCcsIHllYXI6IDIwMTYsIGRlc2NyaXB0aW9uOiAnVGhvdWdodGZ1bCBhbGllbiBjb250YWN0IGZpbG0gYWJvdXQgY29tbXVuaWNhdGlvbiBhbmQgdGltZScsIHZpYmVNYXRjaDogWydjZXJlYnJhbCcsICdlbW90aW9uYWwnLCAnc2NpLWZpJ10gfSxcclxuICAgICAgeyB0aXRsZTogJ0V4IE1hY2hpbmEnLCB5ZWFyOiAyMDE0LCBkZXNjcmlwdGlvbjogJ0ludGltYXRlIEFJIHRocmlsbGVyIGFib3V0IGNvbnNjaW91c25lc3MgYW5kIGh1bWFuaXR5JywgdmliZU1hdGNoOiBbJ3BzeWNob2xvZ2ljYWwnLCAnc2NpLWZpJywgJ3BoaWxvc29waGljYWwnXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnSW50ZXJzdGVsbGFyJywgeWVhcjogMjAxNCwgZGVzY3JpcHRpb246ICdFcGljIHNwYWNlIG9keXNzZXkgYWJvdXQgbG92ZSB0cmFuc2NlbmRpbmcgZGltZW5zaW9ucycsIHZpYmVNYXRjaDogWydlcGljJywgJ2Vtb3Rpb25hbCcsICdzY2ktZmknXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnSGVyJywgeWVhcjogMjAxMywgZGVzY3JpcHRpb246ICdSb21hbnRpYyBkcmFtYSBhYm91dCBodW1hbi1BSSByZWxhdGlvbnNoaXAnLCB2aWJlTWF0Y2g6IFsncm9tYW50aWMnLCAnZnV0dXJpc3RpYycsICdlbW90aW9uYWwnXSB9XHJcbiAgICBdLFxyXG4gICAgXHJcbiAgICAvLyBBY3Rpb24gJiBJbnRlbnNlIFZpYmVzXHJcbiAgICAnYWN0aW9uJzogW1xyXG4gICAgICB7IHRpdGxlOiAnTWFkIE1heDogRnVyeSBSb2FkJywgeWVhcjogMjAxNSwgZGVzY3JpcHRpb246ICdIaWdoLW9jdGFuZSBwb3N0LWFwb2NhbHlwdGljIGFjdGlvbiBtYXN0ZXJwaWVjZScsIHZpYmVNYXRjaDogWydpbnRlbnNlJywgJ3Zpc3VhbCcsICdhY3Rpb24nXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnSm9obiBXaWNrJywgeWVhcjogMjAxNCwgZGVzY3JpcHRpb246ICdTdHlsaXNoIHJldmVuZ2UgdGhyaWxsZXIgd2l0aCBpbmNyZWRpYmxlIGFjdGlvbiBjaG9yZW9ncmFwaHknLCB2aWJlTWF0Y2g6IFsnc3R5bGlzaCcsICdpbnRlbnNlJywgJ2FjdGlvbiddIH0sXHJcbiAgICAgIHsgdGl0bGU6ICdUaGUgUmFpZCcsIHllYXI6IDIwMTEsIGRlc2NyaXB0aW9uOiAnQnJ1dGFsIG1hcnRpYWwgYXJ0cyBhY3Rpb24gZmlsbSBpbiBjb25maW5lZCBzZXR0aW5nJywgdmliZU1hdGNoOiBbJ2ludGVuc2UnLCAnbWFydGlhbF9hcnRzJywgJ2FjdGlvbiddIH0sXHJcbiAgICAgIHsgdGl0bGU6ICdCYWJ5IERyaXZlcicsIHllYXI6IDIwMTcsIGRlc2NyaXB0aW9uOiAnTXVzaWMtZHJpdmVuIGhlaXN0IGZpbG0gd2l0aCBraW5ldGljIGVuZXJneScsIHZpYmVNYXRjaDogWydzdHlsaXNoJywgJ211c2ljYWwnLCAnYWN0aW9uJ10gfVxyXG4gICAgXSxcclxuICAgIFxyXG4gICAgLy8gUm9tYW5jZSAmIEVtb3Rpb25hbCBWaWJlc1xyXG4gICAgJ3JvbWFuY2UnOiBbXHJcbiAgICAgIHsgdGl0bGU6ICdMYSBMYSBMYW5kJywgeWVhcjogMjAxNiwgZGVzY3JpcHRpb246ICdNb2Rlcm4gbXVzaWNhbCBhYm91dCBsb3ZlIGFuZCBkcmVhbXMgaW4gTG9zIEFuZ2VsZXMnLCB2aWJlTWF0Y2g6IFsncm9tYW50aWMnLCAnbXVzaWNhbCcsICdlbW90aW9uYWwnXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnQ2FsbCBNZSBCeSBZb3VyIE5hbWUnLCB5ZWFyOiAyMDE3LCBkZXNjcmlwdGlvbjogJ0JlYXV0aWZ1bCBjb21pbmctb2YtYWdlIHJvbWFuY2Ugc2V0IGluIEl0YWx5JywgdmliZU1hdGNoOiBbJ3JvbWFudGljJywgJ2NvbWluZ19vZl9hZ2UnLCAnZW1vdGlvbmFsJ10gfSxcclxuICAgICAgeyB0aXRsZTogJ1RoZSBTaGFwZSBvZiBXYXRlcicsIHllYXI6IDIwMTcsIGRlc2NyaXB0aW9uOiAnRmFudGFzeSByb21hbmNlIGJldHdlZW4gd29tYW4gYW5kIGFtcGhpYmlhbiBjcmVhdHVyZScsIHZpYmVNYXRjaDogWydyb21hbnRpYycsICdmYW50YXN5JywgJ3VuaXF1ZSddIH0sXHJcbiAgICAgIHsgdGl0bGU6ICdFdGVybmFsIFN1bnNoaW5lIG9mIHRoZSBTcG90bGVzcyBNaW5kJywgeWVhcjogMjAwNCwgZGVzY3JpcHRpb246ICdVbmlxdWUgcm9tYW5jZSBhYm91dCBtZW1vcnkgYW5kIGxvdmUnLCB2aWJlTWF0Y2g6IFsncm9tYW50aWMnLCAncHN5Y2hvbG9naWNhbCcsICd1bmlxdWUnXSB9XHJcbiAgICBdLFxyXG4gICAgXHJcbiAgICAvLyBEYXJrICYgUHN5Y2hvbG9naWNhbCBWaWJlc1xyXG4gICAgJ3RocmlsbGVyJzogW1xyXG4gICAgICB7IHRpdGxlOiAnR29uZSBHaXJsJywgeWVhcjogMjAxNCwgZGVzY3JpcHRpb246ICdQc3ljaG9sb2dpY2FsIHRocmlsbGVyIGFib3V0IG1hcnJpYWdlIGFuZCBkZWNlcHRpb24nLCB2aWJlTWF0Y2g6IFsncHN5Y2hvbG9naWNhbCcsICdkYXJrJywgJ3RocmlsbGVyJ10gfSxcclxuICAgICAgeyB0aXRsZTogJ1pvZGlhYycsIHllYXI6IDIwMDcsIGRlc2NyaXB0aW9uOiAnTWV0aWN1bG91cyBwcm9jZWR1cmFsIGFib3V0IHRoZSBab2RpYWMga2lsbGVyIGludmVzdGlnYXRpb24nLCB2aWJlTWF0Y2g6IFsnZGFyaycsICdpbnZlc3RpZ2F0aXZlJywgJ3BzeWNob2xvZ2ljYWwnXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnUHJpc29uZXJzJywgeWVhcjogMjAxMywgZGVzY3JpcHRpb246ICdJbnRlbnNlIHRocmlsbGVyIGFib3V0IGRlc3BlcmF0ZSBmYXRoZXIgc2VhcmNoaW5nIGZvciBkYXVnaHRlcicsIHZpYmVNYXRjaDogWydpbnRlbnNlJywgJ2RhcmsnLCAndGhyaWxsZXInXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnU2h1dHRlciBJc2xhbmQnLCB5ZWFyOiAyMDEwLCBkZXNjcmlwdGlvbjogJ1BzeWNob2xvZ2ljYWwgdGhyaWxsZXIgc2V0IGluIG15c3RlcmlvdXMgcHN5Y2hpYXRyaWMgZmFjaWxpdHknLCB2aWJlTWF0Y2g6IFsncHN5Y2hvbG9naWNhbCcsICdteXN0ZXJ5JywgJ2RhcmsnXSB9XHJcbiAgICBdLFxyXG4gICAgXHJcbiAgICAvLyBEcmFtYSAmIENoYXJhY3Rlci1Ecml2ZW4gVmliZXNcclxuICAgICdkcmFtYSc6IFtcclxuICAgICAgeyB0aXRsZTogJ01hbmNoZXN0ZXIgYnkgdGhlIFNlYScsIHllYXI6IDIwMTYsIGRlc2NyaXB0aW9uOiAnRGVlcGx5IGVtb3Rpb25hbCBkcmFtYSBhYm91dCBncmllZiBhbmQgZmFtaWx5JywgdmliZU1hdGNoOiBbJ2Vtb3Rpb25hbCcsICdmYW1pbHknLCAnZHJhbWEnXSB9LFxyXG4gICAgICB7IHRpdGxlOiAnTW9vbmxpZ2h0JywgeWVhcjogMjAxNiwgZGVzY3JpcHRpb246ICdCZWF1dGlmdWwgY29taW5nLW9mLWFnZSBzdG9yeSB0b2xkIGluIHRocmVlIGFjdHMnLCB2aWJlTWF0Y2g6IFsnY29taW5nX29mX2FnZScsICdlbW90aW9uYWwnLCAnY2hhcmFjdGVyX3N0dWR5J10gfSxcclxuICAgICAgeyB0aXRsZTogJ1RoZXJlIFdpbGwgQmUgQmxvb2QnLCB5ZWFyOiAyMDA3LCBkZXNjcmlwdGlvbjogJ0VwaWMgY2hhcmFjdGVyIHN0dWR5IG9mIGdyZWVkIGFuZCBhbWJpdGlvbicsIHZpYmVNYXRjaDogWydjaGFyYWN0ZXJfc3R1ZHknLCAnZXBpYycsICdkYXJrJ10gfSxcclxuICAgICAgeyB0aXRsZTogJ1RoZSBTb2NpYWwgTmV0d29yaycsIHllYXI6IDIwMTAsIGRlc2NyaXB0aW9uOiAnU2hhcnAgZHJhbWEgYWJvdXQgRmFjZWJvb2tcXCdzIGNyZWF0aW9uIGFuZCBiZXRyYXlhbCcsIHZpYmVNYXRjaDogWydjaGFyYWN0ZXJfc3R1ZHknLCAnbW9kZXJuJywgJ2RyYW1hJ10gfVxyXG4gICAgXSxcclxuICAgIFxyXG4gICAgLy8gQ29tZWR5ICYgTGlnaHQgVmliZXNcclxuICAgICdjb21lZHknOiBbXHJcbiAgICAgIHsgdGl0bGU6ICdUaGUgR3JhbmQgQnVkYXBlc3QgSG90ZWwnLCB5ZWFyOiAyMDE0LCBkZXNjcmlwdGlvbjogJ1doaW1zaWNhbCBXZXMgQW5kZXJzb24gY29tZWR5IGFib3V0IEV1cm9wZWFuIGhvdGVsJywgdmliZU1hdGNoOiBbJ3doaW1zaWNhbCcsICd2aXN1YWwnLCAnY29tZWR5J10gfSxcclxuICAgICAgeyB0aXRsZTogJ0tuaXZlcyBPdXQnLCB5ZWFyOiAyMDE5LCBkZXNjcmlwdGlvbjogJ0NsZXZlciB3aG9kdW5pdCB3aXRoIGV4Y2VsbGVudCBlbnNlbWJsZSBjYXN0JywgdmliZU1hdGNoOiBbJ2NsZXZlcicsICdlbnNlbWJsZScsICdteXN0ZXJ5J10gfSxcclxuICAgICAgeyB0aXRsZTogJ0h1bnQgZm9yIHRoZSBXaWxkZXJwZW9wbGUnLCB5ZWFyOiAyMDE2LCBkZXNjcmlwdGlvbjogJ0hlYXJ0d2FybWluZyBOZXcgWmVhbGFuZCBhZHZlbnR1cmUgY29tZWR5JywgdmliZU1hdGNoOiBbJ2hlYXJ0d2FybWluZycsICdhZHZlbnR1cmUnLCAnY29tZWR5J10gfVxyXG4gICAgXSxcclxuICAgIFxyXG4gICAgLy8gSG9ycm9yICYgU3VzcGVuc2UgVmliZXNcclxuICAgICdob3Jyb3InOiBbXHJcbiAgICAgIHsgdGl0bGU6ICdIZXJlZGl0YXJ5JywgeWVhcjogMjAxOCwgZGVzY3JpcHRpb246ICdEZWVwbHkgdW5zZXR0bGluZyBmYW1pbHkgaG9ycm9yIGFib3V0IGdyaWVmIGFuZCB0cmF1bWEnLCB2aWJlTWF0Y2g6IFsncHN5Y2hvbG9naWNhbCcsICdmYW1pbHknLCAnaG9ycm9yJ10gfSxcclxuICAgICAgeyB0aXRsZTogJ0dldCBPdXQnLCB5ZWFyOiAyMDE3LCBkZXNjcmlwdGlvbjogJ1NvY2lhbCB0aHJpbGxlciBjb21iaW5pbmcgaG9ycm9yIHdpdGggcmFjaWFsIGNvbW1lbnRhcnknLCB2aWJlTWF0Y2g6IFsnc29jaWFsJywgJ3BzeWNob2xvZ2ljYWwnLCAnaG9ycm9yJ10gfSxcclxuICAgICAgeyB0aXRsZTogJ1RoZSBXaXRjaCcsIHllYXI6IDIwMTUsIGRlc2NyaXB0aW9uOiAnUGVyaW9kIGhvcnJvciBhYm91dCBQdXJpdGFuIGZhbWlseSBhbmQgd2l0Y2hjcmFmdCcsIHZpYmVNYXRjaDogWydhdG1vc3BoZXJpYycsICdwZXJpb2QnLCAnaG9ycm9yJ10gfVxyXG4gICAgXSxcclxuICAgIFxyXG4gICAgLy8gRmFudGFzeSAmIE1hZ2ljYWwgVmliZXNcclxuICAgICdmYW50YXN5JzogW1xyXG4gICAgICB7IHRpdGxlOiAnUGFuXFwncyBMYWJ5cmludGgnLCB5ZWFyOiAyMDA2LCBkZXNjcmlwdGlvbjogJ0RhcmsgZmFpcnkgdGFsZSBibGVuZGluZyByZWFsaXR5IGFuZCBmYW50YXN5JywgdmliZU1hdGNoOiBbJ2ZhbnRhc3knLCAnZGFyaycsICdtYWdpY2FsJ10gfSxcclxuICAgICAgeyB0aXRsZTogJ1RoZSBTaGFwZSBvZiBXYXRlcicsIHllYXI6IDIwMTcsIGRlc2NyaXB0aW9uOiAnUm9tYW50aWMgZmFudGFzeSBhYm91dCBsb3ZlIGNvbnF1ZXJpbmcgZGlmZmVyZW5jZScsIHZpYmVNYXRjaDogWydyb21hbnRpYycsICdmYW50YXN5JywgJ3VuaXF1ZSddIH0sXHJcbiAgICAgIHsgdGl0bGU6ICdBbcOpbGllJywgeWVhcjogMjAwMSwgZGVzY3JpcHRpb246ICdXaGltc2ljYWwgRnJlbmNoIGZpbG0gYWJvdXQgam95IGFuZCBodW1hbiBjb25uZWN0aW9uJywgdmliZU1hdGNoOiBbJ3doaW1zaWNhbCcsICdoZWFydHdhcm1pbmcnLCAnZnJlbmNoJ10gfVxyXG4gICAgXVxyXG4gIH07XHJcbiAgXHJcbiAgLy8gRmluZCBtb3ZpZXMgdGhhdCBtYXRjaCB0aGUgZGV0ZWN0ZWQgdmliZVxyXG4gIGxldCBzZWxlY3RlZE1vdmllczogYW55W10gPSBbXTtcclxuICBcclxuICAvLyBGaXJzdCwgdHJ5IHRvIG1hdGNoIGJhc2VkIG9uIHByaW1hcnkgdGFnc1xyXG4gIHRhZ3MuZm9yRWFjaCgodGFnOiBzdHJpbmcpID0+IHtcclxuICAgIGlmIChtb3ZpZXNCeVZpYmVbdGFnXSkge1xyXG4gICAgICBzZWxlY3RlZE1vdmllcy5wdXNoKC4uLm1vdmllc0J5VmliZVt0YWddKTtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICAvLyBJZiBubyBkaXJlY3QgbWF0Y2hlcywgdHJ5IHJlbGF0ZWQgdmliZXMgYmFzZWQgb24gbW9vZFxyXG4gIGlmIChzZWxlY3RlZE1vdmllcy5sZW5ndGggPT09IDApIHtcclxuICAgIGNvbnN0IG1vb2RUb1ZpYmVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XHJcbiAgICAgICdkYXJrJzogWyd0aHJpbGxlcicsICdob3Jyb3InLCAnZHJhbWEnXSxcclxuICAgICAgJ2ludGVuc2UnOiBbJ2FjdGlvbicsICd0aHJpbGxlciddLFxyXG4gICAgICAnZW1vdGlvbmFsJzogWydkcmFtYScsICdyb21hbmNlJ10sXHJcbiAgICAgICdsaWdodCc6IFsnY29tZWR5JywgJ2ZhbnRhc3knXSxcclxuICAgICAgJ2F0bW9zcGhlcmljJzogWyd0aHJpbGxlcicsICdob3Jyb3InLCAnc2NpLWZpJ11cclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmIChwcmltYXJ5TW9vZCAmJiBtb29kVG9WaWJlc1twcmltYXJ5TW9vZF0pIHtcclxuICAgICAgbW9vZFRvVmliZXNbcHJpbWFyeU1vb2RdLmZvckVhY2godmliZSA9PiB7XHJcbiAgICAgICAgaWYgKG1vdmllc0J5VmliZVt2aWJlXSkge1xyXG4gICAgICAgICAgc2VsZWN0ZWRNb3ZpZXMucHVzaCguLi5tb3ZpZXNCeVZpYmVbdmliZV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEZhbGxiYWNrIHRvIGRyYW1hIGlmIHN0aWxsIG5vIG1hdGNoZXNcclxuICBpZiAoc2VsZWN0ZWRNb3ZpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICBzZWxlY3RlZE1vdmllcyA9IG1vdmllc0J5VmliZVsnZHJhbWEnXTtcclxuICB9XHJcbiAgXHJcbiAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgYW5kIHRoZSBvcmlnaW5hbCBtb3ZpZVxyXG4gIGNvbnN0IHVuaXF1ZU1vdmllcyA9IHNlbGVjdGVkTW92aWVzXHJcbiAgICAuZmlsdGVyKChtb3ZpZSwgaW5kZXgsIHNlbGYpID0+IFxyXG4gICAgICBtb3ZpZS50aXRsZS50b0xvd2VyQ2FzZSgpICE9PSBvcmlnaW5hbE1vdmllLnRvTG93ZXJDYXNlKCkgJiZcclxuICAgICAgaW5kZXggPT09IHNlbGYuZmluZEluZGV4KG0gPT4gbS50aXRsZSA9PT0gbW92aWUudGl0bGUpXHJcbiAgICApXHJcbiAgICAuc2xpY2UoMCwgNik7XHJcbiAgXHJcbiAgLy8gQWRkIG1hdGNoIHNjb3JlcyBhbmQgcmVhc29ucyBiYXNlZCBvbiB2aWJlIGFsaWdubWVudFxyXG4gIHJldHVybiB1bmlxdWVNb3ZpZXMubWFwKChtb3ZpZSwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IHNoYXJlZFZpYmVFbGVtZW50cyA9IG1vdmllLnZpYmVNYXRjaC5maWx0ZXIoKHZpYmU6IHN0cmluZykgPT4gXHJcbiAgICAgIHRhZ3Muc29tZSgodGFnOiBzdHJpbmcpID0+IHRhZy5pbmNsdWRlcyh2aWJlKSB8fCB2aWJlLmluY2x1ZGVzKHRhZykpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBjb25zdCBtYXRjaFNjb3JlID0gTWF0aC5tYXgoMC42LCAwLjggLSAoaW5kZXggKiAwLjAzKSArIChzaGFyZWRWaWJlRWxlbWVudHMubGVuZ3RoICogMC4wNSkpO1xyXG4gICAgXHJcbiAgICBjb25zdCByZWFzb24gPSBzaGFyZWRWaWJlRWxlbWVudHMubGVuZ3RoID4gMCBcclxuICAgICAgPyBgU2hhcmVzICR7c2hhcmVkVmliZUVsZW1lbnRzLmpvaW4oJywgJyl9IHZpYmVzIHdpdGggc2ltaWxhciAke3ByaW1hcnlNb29kIHx8ICdlbW90aW9uYWwnfSB0b25lYFxyXG4gICAgICA6IGBNYXRjaGVzIHRoZSAke3ByaW1hcnlNb29kIHx8ICdlbW90aW9uYWwnfSBhbmQgJHt2aWJlSW50ZW5zaXR5IHx8ICdtZWRpdW0nfSBpbnRlbnNpdHkgdmliZWA7XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRpdGxlOiBtb3ZpZS50aXRsZSxcclxuICAgICAgZGVzY3JpcHRpb246IG1vdmllLmRlc2NyaXB0aW9uLFxyXG4gICAgICB5ZWFyOiBtb3ZpZS55ZWFyLFxyXG4gICAgICByYXRpbmc6IDcuMCArIE1hdGgucmFuZG9tKCkgKiAyLjUsIC8vIFNpbXVsYXRlZCByYXRpbmdcclxuICAgICAgbWF0Y2hTY29yZSxcclxuICAgICAgcmVhc29uLFxyXG4gICAgICBzaGFyZWRFbGVtZW50czogc2hhcmVkVmliZUVsZW1lbnRzLmxlbmd0aCA+IDAgPyBzaGFyZWRWaWJlRWxlbWVudHMgOiB0YWdzLnNsaWNlKDAsIDMpXHJcbiAgICB9O1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCc9PT0gU3RhcnRpbmcgbW92aWUgYW5hbHlzaXMgPT09Jyk7XHJcbiAgICBjb25zdCB7IG1vdmllTmFtZSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcblxyXG4gICAgaWYgKCFtb3ZpZU5hbWUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignTm8gbW92aWUgbmFtZSBwcm92aWRlZCcpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ05vIG1vdmllIG5hbWUgcHJvdmlkZWQnIH0gYXMgQVBJRXJyb3IsXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgQVBJIGtleXNcclxuICAgIGlmICghcHJvY2Vzcy5lbnYuSFVHR0lOR0ZBQ0VfQVBJX0tFWSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIEhVR0dJTkdGQUNFX0FQSV9LRVknKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdTZXJ2ZXIgY29uZmlndXJhdGlvbiBlcnJvcjogTWlzc2luZyBIdWdnaW5nIEZhY2UgQVBJIGtleScgfSBhcyBBUElFcnJvcixcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGVwIDE6IEFuYWx5emUgbW92aWUgd2l0aCBIdWdnaW5nIEZhY2VcclxuICAgIGNvbnNvbGUubG9nKCdTdGVwIDE6IEFuYWx5emluZyBtb3ZpZSB3aXRoIEh1Z2dpbmcgRmFjZS4uLicpO1xyXG4gICAgbGV0IG1vdmllQW5hbHlzaXM7XHJcbiAgICB0cnkge1xyXG4gICAgICBtb3ZpZUFuYWx5c2lzID0gYXdhaXQgYW5hbHl6ZU1vdmllV2l0aEhGKG1vdmllTmFtZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTW92aWUgYW5hbHlzaXM6JywgbW92aWVBbmFseXNpcyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgSHVnZ2luZyBGYWNlIG1vdmllIGFuYWx5c2lzIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIG1vdmllQW5hbHlzaXMgPSBpbnRlbGxpZ2VudE1vdmllQW5hbHlzaXMobW92aWVOYW1lKTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfk50gVXNpbmcgZmFsbGJhY2sgbW92aWUgYW5hbHlzaXMnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGVwIDI6IEdlbmVyYXRlIHZpYmUgcGFyYW1ldGVyc1xyXG4gICAgY29uc29sZS5sb2coJ1N0ZXAgMjogR2VuZXJhdGluZyB2aWJlIHBhcmFtZXRlcnMuLi4nKTtcclxuICAgIGNvbnN0IHZpYmVQYXJhbWV0ZXJzID0gZ2VuZXJhdGVWaWJlUGFyYW1ldGVycyhtb3ZpZUFuYWx5c2lzKTtcclxuICAgIGNvbnNvbGUubG9nKCfinIUgVmliZSBwYXJhbWV0ZXJzOicsIHZpYmVQYXJhbWV0ZXJzKTtcclxuXHJcbiAgICAvLyBTdGVwIDM6IEdldCBzaW1pbGFyIG1vdmllcyBmcm9tIFFsb29cclxuICAgIGNvbnNvbGUubG9nKCdTdGVwIDM6IEdldHRpbmcgc2ltaWxhciBtb3ZpZXMuLi4nKTtcclxuICAgIGxldCBzaW1pbGFyTW92aWVzO1xyXG4gICAgdHJ5IHtcclxuICAgICAgc2ltaWxhck1vdmllcyA9IGF3YWl0IGdldFNpbWlsYXJNb3ZpZXNGcm9tUWxvbyh2aWJlUGFyYW1ldGVycywgbW92aWVOYW1lKTtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSBTaW1pbGFyIG1vdmllcyByZWNlaXZlZDonLCBzaW1pbGFyTW92aWVzLmxlbmd0aCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgTW92aWUgcmVjb21tZW5kYXRpb25zIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIHNpbWlsYXJNb3ZpZXMgPSBnZXRGYWxsYmFja1NpbWlsYXJNb3ZpZXModmliZVBhcmFtZXRlcnMsIG1vdmllTmFtZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OdIFVzaW5nIGZhbGxiYWNrIG1vdmllIHJlY29tbWVuZGF0aW9ucycpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHByb2Nlc3NpbmdUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuICAgIGNvbnNvbGUubG9nKGDinIUgVG90YWwgcHJvY2Vzc2luZyB0aW1lOiAke3Byb2Nlc3NpbmdUaW1lfW1zYCk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2U6IE1vdmllVmliZVJlc3BvbnNlID0ge1xyXG4gICAgICBtb3ZpZUFuYWx5c2lzLFxyXG4gICAgICB2aWJlUGFyYW1ldGVycyxcclxuICAgICAgc2ltaWxhck1vdmllcyxcclxuICAgICAgcHJvY2Vzc2luZ1RpbWVcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ/CfkqUgQ3JpdGljYWwgZXJyb3IgaW4gbW92aWUgYW5hbHlzaXM6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICBjb25zdCBlcnJvclJlc3BvbnNlOiBBUElFcnJvciA9IHtcclxuICAgICAgZXJyb3I6ICdNb3ZpZSBhbmFseXNpcyBmYWlsZWQnLFxyXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJyxcclxuICAgICAgY29kZTogJ01PVklFX0FOQUxZU0lTX0VSUk9SJ1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZXJyb3JSZXNwb25zZSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiSEZfTU9WSUVfQU5BTFlTSVNfTU9ERUwiLCJIRl9CQUNLVVBfTU9ERUwiLCJIRl9BTFRFUk5BVElWRV9NT0RFTCIsImFuYWx5emVNb3ZpZVdpdGhIRiIsIm1vdmllTmFtZSIsInByb2Nlc3MiLCJlbnYiLCJIVUdHSU5HRkFDRV9BUElfS0VZIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwibW9kZWxzIiwibW9kZWwiLCJyZXN1bHQiLCJ0cnlNb3ZpZUFuYWx5c2lzV2l0aE1vZGVsIiwic3VtbWFyeSIsImxlbmd0aCIsImVycm9yIiwiaW50ZWxsaWdlbnRNb3ZpZUFuYWx5c2lzIiwibW9kZWxVcmwiLCJpc0xsYW1hTW9kZWwiLCJpbmNsdWRlcyIsInByb21wdCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbnB1dHMiLCJwYXJhbWV0ZXJzIiwibWF4X25ld190b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsImRvX3NhbXBsZSIsInRvcF9wIiwicmV0dXJuX2Z1bGxfdGV4dCIsInN0b3AiLCJ1bmRlZmluZWQiLCJzdGF0dXMiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJqc29uIiwiZ2VuZXJhdGVkVGV4dCIsIkFycmF5IiwiaXNBcnJheSIsImdlbmVyYXRlZF90ZXh0IiwianNvbk1hdGNoIiwibWF0Y2giLCJwYXJzZWQiLCJwYXJzZSIsInRoZW1lcyIsImdlbnJlcyIsImN1bHR1cmFsS2V5d29yZHMiLCJwYXJzZUVycm9yIiwicGFyc2VNb3ZpZUFuYWx5c2lzRnJvbVRleHQiLCJtb3ZpZURhdGFiYXNlIiwibG93ZXJNb3ZpZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImdlbmVyYXRlRmFsbGJhY2tBbmFseXNpcyIsImxvd2VyTmFtZSIsInB1c2giLCJzbGljZSIsImpvaW4iLCJwYXJzZU1vdmllQW5hbHlzaXMiLCJhbmFseXNpc1RleHQiLCJleHRyYWN0TGlzdEZyb21UZXh0IiwiZXh0cmFjdEdlbnJlcyIsImV4dHJhY3RDdWx0dXJhbEtleXdvcmRzIiwic3Vic3RyaW5nIiwia2V5d29yZHMiLCJpdGVtcyIsInNlbnRlbmNlcyIsInNwbGl0IiwiZm9yRWFjaCIsInNlbnRlbmNlIiwia2V5d29yZCIsIndvcmRzIiwid29yZCIsInJlcGxhY2UiLCJTZXQiLCJjb21tb25HZW5yZXMiLCJmb3VuZEdlbnJlcyIsImZpbHRlciIsImdlbnJlIiwiY3VsdHVyYWxUZXJtcyIsImZvdW5kVGVybXMiLCJ0ZXJtIiwiZ2VuZXJhdGVWaWJlUGFyYW1ldGVycyIsIm1vdmllQW5hbHlzaXMiLCJhdWRpZW5jZU1hcCIsImF1ZGllbmNlcyIsInRhZ3MiLCJtYXAiLCJ0YWciLCJlbnRpdHlUeXBlIiwiZ2V0U2ltaWxhck1vdmllc0Zyb21RbG9vIiwidmliZVBhcmFtZXRlcnMiLCJvcmlnaW5hbE1vdmllIiwiUUxPT19BUElfS0VZIiwiZ2V0RmFsbGJhY2tTaW1pbGFyTW92aWVzIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiYXBwZW5kIiwicHJpbWFyeVZpYmUiLCJwcmltYXJ5TW9vZCIsInZpYmVJbnRlbnNpdHkiLCJxbG9vVGFncyIsInVybCIsInRvU3RyaW5nIiwidHJ5U2ltcGxpZmllZFFsb29RdWVyeSIsImRhdGEiLCJyZXN1bHRzIiwiZW50aXRpZXMiLCJtb3ZpZXMiLCJmaWx0ZXJlZE1vdmllcyIsIm1vdmllIiwibmFtZSIsInRyYW5zZm9ybVFsb29Nb3ZpZVJlc3BvbnNlIiwicHJpbWFyeVRhZyIsInFsb29Nb3ZpZSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwcm9wZXJ0aWVzIiwieWVhciIsInJlbGVhc2VfeWVhciIsInJhdGluZyIsIm1vdmllS2V5d29yZHMiLCJrIiwidmliZUtleXdvcmRzIiwidCIsInNoYXJlZEVsZW1lbnRzIiwic29tZSIsInZpYmVLZXl3b3JkIiwibWF0Y2hTY29yZSIsIk1hdGgiLCJtaW4iLCJyZWFzb24iLCJnZW5lcmF0ZU1vdmllTWF0Y2hSZWFzb24iLCJxbG9vX2RhdGEiLCJlbnRpdHlfaWQiLCJ0eXBlIiwibW92aWVzQnlWaWJlIiwidmliZU1hdGNoIiwic2VsZWN0ZWRNb3ZpZXMiLCJtb29kVG9WaWJlcyIsInZpYmUiLCJ1bmlxdWVNb3ZpZXMiLCJpbmRleCIsInNlbGYiLCJmaW5kSW5kZXgiLCJtIiwic2hhcmVkVmliZUVsZW1lbnRzIiwibWF4IiwicmFuZG9tIiwiUE9TVCIsInJlcXVlc3QiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93Iiwic2ltaWxhck1vdmllcyIsInByb2Nlc3NpbmdUaW1lIiwiZXJyb3JSZXNwb25zZSIsImRldGFpbHMiLCJtZXNzYWdlIiwiY29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analyze-movie/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-movie%2Froute&page=%2Fapi%2Fanalyze-movie%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-movie%2Froute.ts&appDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ckrish%5CDesktop%5Cvibe-validator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();